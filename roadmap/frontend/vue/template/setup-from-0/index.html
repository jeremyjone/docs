<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>从 0 搭建项目模板（vue3） | JeremyJone 的文档站</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/assets/img/logo.png">
    <undefined></undefined>
    <link rel="alternate" type="application/atom+xml" href="https://docs.jeremyjone.com/atom.xml" title="JeremyJone 的文档站 Atom Feed">
    <link rel="alternate" type="application/json" href="https://docs.jeremyjone.com/feed.json" title="JeremyJone 的文档站 JSON Feed">
    <link rel="alternate" type="application/rss+xml" href="https://docs.jeremyjone.com/rss.xml" title="JeremyJone 的文档站 RSS Feed">
    <link rel="manifest" href="/manifest.webmanifest" crossorigin="use-credentials">
    <meta name="description" content="一个快速学习、速查的站点">
    <meta property="og:url" content="/roadmap/frontend/vue/template/setup-from-0.html">
    <meta property="og:site_name" content="JeremyJone 的文档站">
    <meta property="og:title" content="从 0 搭建项目模板（vue3）">
    <meta property="og:description" content="从 0 搭建项目模板（vue3） 为简化每次初始化项目，最好的方法就是搭建一个项目模板，这样每次初始化的时候直接拉取就好，不用再一个一个进行配置，省去了大量时间。 该内容模板已经在 Github，如果需要，可以直接下载使用。具体使用方法可以查看 Github 或者 模板文档 项目技术方案 这套模板采用如下方案： 搭建工具 vite 2.x; 项目框架 vue">
    <meta property="og:type" content="article">
    <meta property="og:locale" content="zh-CN">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image:alt" content="JeremyJone 的文档站">
    <meta property="article:author" content="JeremyJone">
    <meta name="theme-color" content="#46bd87">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <link rel="preload" href="/assets/css/0.styles.439caf23.css" as="style"><link rel="preload" href="/assets/js/app.1830d723.js" as="script"><link rel="preload" href="/assets/js/vendors~layout-Layout.e6b81aaa.js" as="script"><link rel="preload" href="/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.99fc0ed6.js" as="script"><link rel="preload" href="/assets/js/page-从0搭建项目模板（vue3）.b4dbcf15.js" as="script"><link rel="preload" href="/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound~layout-Slide.69314708.js" as="script"><link rel="prefetch" href="/assets/js/133.d4458c0e.js"><link rel="prefetch" href="/assets/js/134.90e3e1c5.js"><link rel="prefetch" href="/assets/js/135.39336a20.js"><link rel="prefetch" href="/assets/js/136.16ba98d3.js"><link rel="prefetch" href="/assets/js/137.2b3d9d1a.js"><link rel="prefetch" href="/assets/js/138.f8ebb31b.js"><link rel="prefetch" href="/assets/js/139.8755acdc.js"><link rel="prefetch" href="/assets/js/140.fe88c394.js"><link rel="prefetch" href="/assets/js/layout-Blog.1ed60b76.js"><link rel="prefetch" href="/assets/js/layout-Layout.f3e9cb51.js"><link rel="prefetch" href="/assets/js/layout-NotFound.5a99754f.js"><link rel="prefetch" href="/assets/js/layout-Slide.6887e3cd.js"><link rel="prefetch" href="/assets/js/page--69fb9c74.256eb843.js"><link rel="prefetch" href="/assets/js/page-ASPNETCore开发者学习路线图.ff627737.js"><link rel="prefetch" href="/assets/js/page-Android学习之路.c7071091.js"><link rel="prefetch" href="/assets/js/page-AutoMapper.f90b0729.js"><link rel="prefetch" href="/assets/js/page-C.ecb378c4.js"><link rel="prefetch" href="/assets/js/page-CSS基础.705749ab.js"><link rel="prefetch" href="/assets/js/page-CSS规范.5e3fdb4b.js"><link rel="prefetch" href="/assets/js/page-CSS预处理器.31365168.js"><link rel="prefetch" href="/assets/js/page-DbContext的配置.e02cf50f.js"><link rel="prefetch" href="/assets/js/page-Devtools.12177614.js"><link rel="prefetch" href="/assets/js/page-Docker使用文档.f13ee261.js"><link rel="prefetch" href="/assets/js/page-Docker快速搭建NPM服务器.04da150e.js"><link rel="prefetch" href="/assets/js/page-ExamplePage.feac6b7d.js"><link rel="prefetch" href="/assets/js/page-Flutter学习之路.f0d54983.js"><link rel="prefetch" href="/assets/js/page-GIT命令.1ee545ee.js"><link rel="prefetch" href="/assets/js/page-GitHubPagesaction配置.752a1806.js"><link rel="prefetch" href="/assets/js/page-HTML基础.c51df38b.js"><link rel="prefetch" href="/assets/js/page-HTML处理方法.a4405fb6.js"><link rel="prefetch" href="/assets/js/page-HTML规范.34f1f623.js"><link rel="prefetch" href="/assets/js/page-HTTP.882cc326.js"><link rel="prefetch" href="/assets/js/page-HTTPS.71e930b7.js"><link rel="prefetch" href="/assets/js/page-Home.80e83b34.js"><link rel="prefetch" href="/assets/js/page-IP网际协议.daf2989f.js"><link rel="prefetch" href="/assets/js/page-IdentityServer4的使用.55f46917.js"><link rel="prefetch" href="/assets/js/page-JWT.3fafda69.js"><link rel="prefetch" href="/assets/js/page-JavaScript基础.7fc0fabe.js"><link rel="prefetch" href="/assets/js/page-JavaScript开发规范.4a5cc8f9.js"><link rel="prefetch" href="/assets/js/page-Java学习之路.fa7718f9.js"><link rel="prefetch" href="/assets/js/page-MVVM.8330578a.js"><link rel="prefetch" href="/assets/js/page-Markdown语法.713a050e.js"><link rel="prefetch" href="/assets/js/page-OSI模型.49f08ade.js"><link rel="prefetch" href="/assets/js/page-Proxy与Reflect.3ddb65e5.js"><link rel="prefetch" href="/assets/js/page-Python开发规范.69634e0a.js"><link rel="prefetch" href="/assets/js/page-RabbitMQ的使用.62c18642.js"><link rel="prefetch" href="/assets/js/page-React学习之路.6f4f8dd7.js"><link rel="prefetch" href="/assets/js/page-Serilog的使用.36523c41.js"><link rel="prefetch" href="/assets/js/page-Swagger文档的使用.85bb45cb.js"><link rel="prefetch" href="/assets/js/page-TCP协议.08d7ae69.js"><link rel="prefetch" href="/assets/js/page-TypeScript.e3b5ed00.js"><link rel="prefetch" href="/assets/js/page-UDP协议.1292939b.js"><link rel="prefetch" href="/assets/js/page-UI框架.e4d414df.js"><link rel="prefetch" href="/assets/js/page-URL.72ec859c.js"><link rel="prefetch" href="/assets/js/page-Vim使用说明.2f51ff91.js"><link rel="prefetch" href="/assets/js/page-VueCli.cba6ddb6.js"><link rel="prefetch" href="/assets/js/page-VueRouter.09ef5ed2.js"><link rel="prefetch" href="/assets/js/page-VueTestUtils.24d3d962.js"><link rel="prefetch" href="/assets/js/page-Vuex.73bf09a6.js"><link rel="prefetch" href="/assets/js/page-Vue学习之路.b620aa46.js"><link rel="prefetch" href="/assets/js/page-Vue开发规范.fc03e608.js"><link rel="prefetch" href="/assets/js/page-class与style的绑定.c8e5d9c2.js"><link rel="prefetch" href="/assets/js/page-npm使用.e1b683b6.js"><link rel="prefetch" href="/assets/js/page-this关键字.7dccb0e2.js"><link rel="prefetch" href="/assets/js/page-七层模型.6a56e903.js"><link rel="prefetch" href="/assets/js/page-万维网.73a7b1a7.js"><link rel="prefetch" href="/assets/js/page-代码书写规范总纲.3d947e0f.js"><link rel="prefetch" href="/assets/js/page-使用.76d135a0.js"><link rel="prefetch" href="/assets/js/page-使用项目模板.aa324d2c.js"><link rel="prefetch" href="/assets/js/page-入门.226713b6.js"><link rel="prefetch" href="/assets/js/page-其他映射工具.121b8e87.js"><link rel="prefetch" href="/assets/js/page-内存缓存.a0c373e7.js"><link rel="prefetch" href="/assets/js/page-分布式缓存.971aa4e8.js"><link rel="prefetch" href="/assets/js/page-列组件JGanttColumn.babf0b6a.js"><link rel="prefetch" href="/assets/js/page-判断方法.8982ae2c.js"><link rel="prefetch" href="/assets/js/page-前端学习之路.38c73c84.js"><link rel="prefetch" href="/assets/js/page-前端进阶.f98e8f9c.js"><link rel="prefetch" href="/assets/js/page-包管理器.55237a98.js"><link rel="prefetch" href="/assets/js/page-原型和原型链详解.b4caebe9.js"><link rel="prefetch" href="/assets/js/page-原理部分.aae05cd1.js"><link rel="prefetch" href="/assets/js/page-响应式与媒体查询.a0c0f4a6.js"><link rel="prefetch" href="/assets/js/page-响应式的原理.91626a22.js"><link rel="prefetch" href="/assets/js/page-四层模型.180287f8.js"><link rel="prefetch" href="/assets/js/page-在ASPNET中使用授权与认证.a70f6171.js"><link rel="prefetch" href="/assets/js/page-域名.2c60b424.js"><link rel="prefetch" href="/assets/js/page-基础知识.5a62bf96.js"><link rel="prefetch" href="/assets/js/page-处理日期方法.c23a43a4.js"><link rel="prefetch" href="/assets/js/page-处理颜色的方法.0174ea7e.js"><link rel="prefetch" href="/assets/js/page-外部身份验证.c9410e4f.js"><link rel="prefetch" href="/assets/js/page-学习路线.f8abd2c4.js"><link rel="prefetch" href="/assets/js/page-定位.99bb21c4.js"><link rel="prefetch" href="/assets/js/page-布局.04c0a57f.js"><link rel="prefetch" href="/assets/js/page-应用性能监控系统.dba1a114.js"><link rel="prefetch" href="/assets/js/page-异步编程.f0fbbe83.js"><link rel="prefetch" href="/assets/js/page-弹性布局（Flexbox）.fe31f226.js"><link rel="prefetch" href="/assets/js/page-循环渲染.75fb2676.js"><link rel="prefetch" href="/assets/js/page-性能部分.a206eee6.js"><link rel="prefetch" href="/assets/js/page-手撸代码.39ebb7bd.js"><link rel="prefetch" href="/assets/js/page-插槽.eb6d122a.js"><link rel="prefetch" href="/assets/js/page-数据和方法.b5af26e7.js"><link rel="prefetch" href="/assets/js/page-数据库.3f4c9b14.js"><link rel="prefetch" href="/assets/js/page-数据的持久化（使用数据库）.c58198fe.js"><link rel="prefetch" href="/assets/js/page-数据结构.4e189b5b.js"><link rel="prefetch" href="/assets/js/page-数组的一些扩展方法.29bc6e65.js"><link rel="prefetch" href="/assets/js/page-文档手册.dc37b9b4.js"><link rel="prefetch" href="/assets/js/page-服务容器.d49f4881.js"><link rel="prefetch" href="/assets/js/page-条件渲染.1e2c61c5.js"><link rel="prefetch" href="/assets/js/page-构建工具.e25d1a63.js"><link rel="prefetch" href="/assets/js/page-栅格布局（Grid）.5ac68ebe.js"><link rel="prefetch" href="/assets/js/page-根组件JGantt.4308e071.js"><link rel="prefetch" href="/assets/js/page-格式化工具.8336f037.js"><link rel="prefetch" href="/assets/js/page-概述.7fb9b7df.js"><link rel="prefetch" href="/assets/js/page-模型.f31aa484.js"><link rel="prefetch" href="/assets/js/page-模板语法.44170ccb.js"><link rel="prefetch" href="/assets/js/page-渲染.55db6777.js"><link rel="prefetch" href="/assets/js/page-滑块组件JGanttSlider.c890c2c1.js"><link rel="prefetch" href="/assets/js/page-生命周期.7085bd1e.js"><link rel="prefetch" href="/assets/js/page-生成方法.49dff517.js"><link rel="prefetch" href="/assets/js/page-盒模型.952ff4a8.js"><link rel="prefetch" href="/assets/js/page-算法.b8f531df.js"><link rel="prefetch" href="/assets/js/page-管理数据库.79d20335.js"><link rel="prefetch" href="/assets/js/page-组件.7dc2fd5c.js"><link rel="prefetch" href="/assets/js/page-组合式API.828d45f5.js"><link rel="prefetch" href="/assets/js/page-网络基础.188dfe3d.js"><link rel="prefetch" href="/assets/js/page-网络请求.6cbc7db1.js"><link rel="prefetch" href="/assets/js/page-虚拟DOM.67c5db47.js"><link rel="prefetch" href="/assets/js/page-计算属性和侦听器.6a886ac5.js"><link rel="prefetch" href="/assets/js/page-计算机基础.99d6d6c0.js"><link rel="prefetch" href="/assets/js/page-计算机基础内容.79d42b43.js"><link rel="prefetch" href="/assets/js/page-详解认证中心的配置.c092eb8b.js"><link rel="prefetch" href="/assets/js/page-跨域.1cf5a4e9.js"><link rel="prefetch" href="/assets/js/page-选择器.38303da6.js"><link rel="prefetch" href="/assets/js/page-通用方法.0ed09471.js"><link rel="prefetch" href="/assets/js/vendors~photo-swipe.ce5dd045.js"><link rel="prefetch" href="/assets/js/vendors~valine.9c5df27f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.439caf23.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container has-navbar has-sidebar has-anchor"><header class="navbar"><!----> <div class="content__navbar-start"></div> <button title="Sidebar Button" class="sidebar-button"><span class="icon"></span></button> <a href="/" class="home-link router-link-active"><img src="/assets/img/logo.png" alt="JeremyJone 的文档站" class="logo"> <!----> <span class="site-name can-hide">JeremyJone 的文档站</span></a> <!----> <div class="content__navbar-center"></div> <div class="links"><button tabindex="-1" aria-hidden="true" class="color-button"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="skin-icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4
        38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32
        51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0
        102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2
        6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4
        0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2
        9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224
        419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4
        470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0
        22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6
        12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128
        505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2
        16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8
        86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4
        80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6
        6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg> <div class="color-picker-menu" style="display:none;"><div class="theme-options"><ul class="themecolor-select"><label for="themecolor-select">主题色:</label> <li><span class="default-theme"></span></li> </ul> <div class="darkmode-toggle"><label for="darkmode-toggle" class="desc">主题模式:</label> <div class="darkmode-switch"><div class="switch"><input id="switch" type="checkbox" checked="checked" class="switch-input"> <label for="switch" class="label"><span class="label-content"></span></label></div></div> <!----></div></div></div></button> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link router-link-active"><!---->
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="代码相关菜单" class="dropdown-title"><span class="title"><!---->
        代码相关
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/standard/" class="nav-link"><!---->
  代码编写规范
</a></li><li class="dropdown-item"><a href="/codes/" class="nav-link"><!---->
  手撸代码
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="文档手册菜单" class="dropdown-title"><span class="title"><!---->
        文档手册
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>使用文档</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/document/git/" class="nav-link"><!---->
  Git 使用文档
</a></li><li class="dropdown-subitem"><a href="/document/markdown/" class="nav-link"><!---->
  Markdown 使用文档
</a></li><li class="dropdown-subitem"><a href="/document/vim/" class="nav-link"><!---->
  Vim 使用文档
</a></li><li class="dropdown-subitem"><a href="/document/npm/" class="nav-link"><!---->
  npm 使用文档
</a></li><li class="dropdown-subitem"><a href="/document/docker/" class="nav-link"><!---->
  Docker 使用文档
</a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>学习手册</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/roadmap/base/" class="nav-link"><!---->
  计算机基础
</a></li><li class="dropdown-subitem"><a href="/roadmap/frontend/" class="nav-link router-link-active active"><!---->
  前端学习之路
</a></li><li class="dropdown-subitem"><a href="/roadmap/dotnetcore/" class="nav-link"><!---->
  .NET 学习之路
</a></li><li class="dropdown-subitem"><a href="/roadmap/java/" class="nav-link"><!---->
  Java 学习之路
</a></li><li class="dropdown-subitem"><a href="/roadmap/flutter/" class="nav-link"><!---->
  Flutter 学习之路
</a></li><li class="dropdown-subitem"><a href="/roadmap/android/" class="nav-link"><!---->
  Android 学习之路
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://www.jeremyjone.com" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  我的博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://www.xiaopangying.com" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  个人站
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></nav> <!----> <a rel="noopener noreferrer" href="https://github.com/jeremyjone/docs" target="_blank" class="repo-link can-hide">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <!----> <div class="content__navbar-end"></div></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><div vocab="https://schema.org/" typeof="Person" class="blogger-info mobile"><div data-balloon-pos="" role="navigation" class="blogger"><img property="image" alt="Blogger Avatar" src="/assets/img/logo.png" class="avatar round"> <div property="name" class="name">JeremyJone</div> <!----></div> <div class="num-wrapper"><div><div class="num">127</div> <div>文章</div></div> <div><div class="num">0</div> <div>分类</div></div> <div><div class="num">0</div> <div>标签</div></div> <div><div class="num">127</div> <div>时间轴</div></div></div> <!----></div> <hr> <!----> <div class="content__sidebar-top"></div> <nav class="sidebar-nav-links"><div class="nav-item"><a href="/" class="nav-link router-link-active"><!---->
  首页
</a></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="代码相关菜单" class="dropdown-title"><span class="title"><!---->
      代码相关
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/standard/" class="nav-link"><!---->
  代码编写规范
</a></li><li class="dropdown-item"><!----> <a href="/codes/" class="nav-link"><!---->
  手撸代码
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="文档手册菜单" class="dropdown-title"><span class="title"><!---->
      文档手册
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>使用文档</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/document/git/" class="nav-link"><!---->
  Git 使用文档
</a></li><li class="dropdown-subitem"><a href="/document/markdown/" class="nav-link"><!---->
  Markdown 使用文档
</a></li><li class="dropdown-subitem"><a href="/document/vim/" class="nav-link"><!---->
  Vim 使用文档
</a></li><li class="dropdown-subitem"><a href="/document/npm/" class="nav-link"><!---->
  npm 使用文档
</a></li><li class="dropdown-subitem"><a href="/document/docker/" class="nav-link"><!---->
  Docker 使用文档
</a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>学习手册</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/roadmap/base/" class="nav-link"><!---->
  计算机基础
</a></li><li class="dropdown-subitem"><a href="/roadmap/frontend/" class="nav-link router-link-active active"><!---->
  前端学习之路
</a></li><li class="dropdown-subitem"><a href="/roadmap/dotnetcore/" class="nav-link"><!---->
  .NET 学习之路
</a></li><li class="dropdown-subitem"><a href="/roadmap/java/" class="nav-link"><!---->
  Java 学习之路
</a></li><li class="dropdown-subitem"><a href="/roadmap/flutter/" class="nav-link"><!---->
  Flutter 学习之路
</a></li><li class="dropdown-subitem"><a href="/roadmap/android/" class="nav-link"><!---->
  Android 学习之路
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://www.jeremyjone.com" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  我的博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://www.xiaopangying.com" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  个人站
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a rel="noopener noreferrer" href="https://github.com/jeremyjone/docs" target="_blank" class="repo-link">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav> <!----> <div class="content__sidebar-center"></div> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable"><!----> <span class="title">前端基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable"><!----> <span class="title">前端进阶</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable open"><!----> <span class="title">Vue</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading clickable"><!----> <span class="title">Vue 基础</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/roadmap/frontend/vue/mvvm/" class="sidebar-link">MVVM</a></li><li><a href="/roadmap/frontend/vue/reactive/" class="sidebar-link">响应式的原理</a></li><li><a href="/roadmap/frontend/vue/virtualdom/" class="sidebar-link">虚拟 DOM</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading clickable"><!----> <span class="title">Vue 生态</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/roadmap/frontend/vue/framework/" class="sidebar-link">UI 框架</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading clickable open"><!----> <span class="title">项目模板</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/roadmap/frontend/vue/template/" aria-current="page" class="sidebar-link">使用项目模板</a></li><li><a href="/roadmap/frontend/vue/template/setup-from-0/" aria-current="page" class="active sidebar-link">从 0 搭建项目模板（vue3）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/roadmap/frontend/vue/template/setup-from-0/#项目技术方案" class="sidebar-link">项目技术方案</a></li><li class="sidebar-sub-header"><a href="/roadmap/frontend/vue/template/setup-from-0/#项目结构" class="sidebar-link">项目结构</a></li><li class="sidebar-sub-header"><a href="/roadmap/frontend/vue/template/setup-from-0/#环境检测" class="sidebar-link">环境检测</a></li><li class="sidebar-sub-header"><a href="/roadmap/frontend/vue/template/setup-from-0/#搭建项目结构" class="sidebar-link">搭建项目结构</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/roadmap/frontend/vue/template/setup-from-0/#初始化项目" class="sidebar-link heading3">初始化项目</a></li><li class="sidebar-sub-header"><a href="/roadmap/frontend/vue/template/setup-from-0/#整理项目结构" class="sidebar-link heading3">整理项目结构</a></li><li class="sidebar-sub-header"><a href="/roadmap/frontend/vue/template/setup-from-0/#修改-vite-的配置文件" class="sidebar-link heading3">修改 vite 的配置文件</a></li><li class="sidebar-sub-header"><a href="/roadmap/frontend/vue/template/setup-from-0/#安装网络工具-axios" class="sidebar-link heading3">安装网络工具 axios</a></li><li class="sidebar-sub-header"><a href="/roadmap/frontend/vue/template/setup-from-0/#安装路由工具-vue-router" class="sidebar-link heading3">安装路由工具 vue-router</a></li><li class="sidebar-sub-header"><a href="/roadmap/frontend/vue/template/setup-from-0/#安装状态管理工具-vuex" class="sidebar-link heading3">安装状态管理工具 vuex</a></li><li class="sidebar-sub-header"><a href="/roadmap/frontend/vue/template/setup-from-0/#安装-css-预编译器" class="sidebar-link heading3">安装 CSS 预编译器</a></li></ul></li><li class="sidebar-sub-header"><a href="/roadmap/frontend/vue/template/setup-from-0/#安装-husky" class="sidebar-link">安装 husky</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/roadmap/frontend/vue/template/setup-from-0/#husky-的错误解决方案" class="sidebar-link heading3">husky 的错误解决方案</a></li></ul></li><li class="sidebar-sub-header"><a href="/roadmap/frontend/vue/template/setup-from-0/#添加代码规范" class="sidebar-link">添加代码规范</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/roadmap/frontend/vue/template/setup-from-0/#配置-editorconfig" class="sidebar-link heading3">配置 EditorConfig</a></li><li class="sidebar-sub-header"><a href="/roadmap/frontend/vue/template/setup-from-0/#配置-prettier" class="sidebar-link heading3">配置 Prettier</a></li><li class="sidebar-sub-header"><a href="/roadmap/frontend/vue/template/setup-from-0/#配置-eslint" class="sidebar-link heading3">配置 ESLint</a></li><li class="sidebar-sub-header"><a href="/roadmap/frontend/vue/template/setup-from-0/#在-husky-中集成样式规范" class="sidebar-link heading3">在 husky 中集成样式规范</a></li><li class="sidebar-sub-header"><a href="/roadmap/frontend/vue/template/setup-from-0/#使用-lint-staged" class="sidebar-link heading3">使用 lint-staged</a></li></ul></li><li class="sidebar-sub-header"><a href="/roadmap/frontend/vue/template/setup-from-0/#解决样式配置后出现的问题" class="sidebar-link">解决样式配置后出现的问题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/roadmap/frontend/vue/template/setup-from-0/#解决-prettier-行尾换行符报错" class="sidebar-link heading3">解决 Prettier 行尾换行符报错</a></li><li class="sidebar-sub-header"><a href="/roadmap/frontend/vue/template/setup-from-0/#解决-prettier-与-eslint-的冲突问题" class="sidebar-link heading3">解决 Prettier 与 ESLint 的冲突问题</a></li><li class="sidebar-sub-header"><a href="/roadmap/frontend/vue/template/setup-from-0/#解决通过-引入的路径问题" class="sidebar-link heading3">解决通过 @ 引入的路径问题</a></li><li class="sidebar-sub-header"><a href="/roadmap/frontend/vue/template/setup-from-0/#尝试保存文件时自动修复错误" class="sidebar-link heading3">尝试保存文件时自动修复错误</a></li><li class="sidebar-sub-header"><a href="/roadmap/frontend/vue/template/setup-from-0/#修复所有-vue-文件第一行首字符处出现-parsing-error-parseroptions-project-的错误" class="sidebar-link heading3">修复所有 vue 文件第一行首字符处出现 Parsing error: &quot;parserOptions.project&quot;... 的错误</a></li><li class="sidebar-sub-header"><a href="/roadmap/frontend/vue/template/setup-from-0/#修复-defineprops-等未定义的错误" class="sidebar-link heading3">修复 defineProps 等未定义的错误</a></li><li class="sidebar-sub-header"><a href="/roadmap/frontend/vue/template/setup-from-0/#修复-plugin-vite-eslint-的相关错误" class="sidebar-link heading3">修复 [plugin:vite:eslint] 的相关错误</a></li></ul></li><li class="sidebar-sub-header"><a href="/roadmap/frontend/vue/template/setup-from-0/#添加提交规范" class="sidebar-link">添加提交规范</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/roadmap/frontend/vue/template/setup-from-0/#集成-commitizen" class="sidebar-link heading3">集成 Commitizen</a></li><li class="sidebar-sub-header"><a href="/roadmap/frontend/vue/template/setup-from-0/#自定义提交配置" class="sidebar-link heading3">自定义提交配置</a></li><li class="sidebar-sub-header"><a href="/roadmap/frontend/vue/template/setup-from-0/#集成-commitlint" class="sidebar-link heading3">集成 commitlint</a></li><li class="sidebar-sub-header"><a href="/roadmap/frontend/vue/template/setup-from-0/#集成-standard-version" class="sidebar-link heading3">集成 Standard-Version</a></li></ul></li><li class="sidebar-sub-header"><a href="/roadmap/frontend/vue/template/setup-from-0/#添加单元测试" class="sidebar-link">添加单元测试</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/roadmap/frontend/vue/template/setup-from-0/#添加测试依赖" class="sidebar-link heading3">添加测试依赖</a></li><li class="sidebar-sub-header"><a href="/roadmap/frontend/vue/template/setup-from-0/#配置-jest" class="sidebar-link heading3">配置 jest</a></li><li class="sidebar-sub-header"><a href="/roadmap/frontend/vue/template/setup-from-0/#执行测试" class="sidebar-link heading3">执行测试</a></li><li class="sidebar-sub-header"><a href="/roadmap/frontend/vue/template/setup-from-0/#将测试集成到-husky-中" class="sidebar-link heading3">将测试集成到 husky 中</a></li></ul></li><li class="sidebar-sub-header"><a href="/roadmap/frontend/vue/template/setup-from-0/#测试常见问题" class="sidebar-link">测试常见问题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/roadmap/frontend/vue/template/setup-from-0/#配置全局-key-之后的-vuex-如何测试" class="sidebar-link heading3">配置全局 key 之后的 vuex 如何测试</a></li></ul></li></ul></li></ul></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable"><!----> <span class="title">React</span> <span class="arrow right"></span></p> <!----></section></li></ul> <!----> <div class="content__sidebar-bottom"></div> <!----></aside> <main class="page"><nav class="breadcrumb"><ol vocab="https://schema.org/" typeof="BreadcrumbList"><li property="itemListElement" typeof="ListItem"><a href="/roadmap/" property="item" typeof="WebPage" class="router-link-active"><!----> <span property="name">学习路线</span></a> <meta property="position" content="1"></li><li property="itemListElement" typeof="ListItem"><a href="/roadmap/frontend/" property="item" typeof="WebPage" class="router-link-active"><!----> <span property="name">前端学习之路</span></a> <meta property="position" content="2"></li><li property="itemListElement" typeof="ListItem"><a href="/roadmap/frontend/vue/" property="item" typeof="WebPage" class="router-link-active"><!----> <span property="name">Vue 学习之路</span></a> <meta property="position" content="3"></li><li property="itemListElement" typeof="ListItem"><a href="/roadmap/frontend/vue/template/" property="item" typeof="WebPage" class="router-link-active"><!----> <span property="name">使用项目模板</span></a> <meta property="position" content="4"></li><li property="itemListElement" typeof="ListItem" class="is-active"><a href="/roadmap/frontend/vue/template/setup-from-0/" aria-current="page" property="item" typeof="WebPage" class="router-link-exact-active router-link-active"><!----> <span property="name">从 0 搭建项目模板（vue3）</span></a> <meta property="position" content="5"></li></ol></nav> <!----> <div class="content__page-top"></div> <div vocab="https://schema.org/" typeof="Article" class="page-title"><h1><!----> <span property="headline">从 0 搭建项目模板（vue3）</span></h1> <div class="page-info"><!----> <span aria-label="作者🖊" data-balloon-pos="down"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon author-icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z" fill="currentColor"></path></svg> <span property="author">JeremyJone</span></span><span aria-label="访问量🔢" data-balloon-pos="down" class="visitor-info"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon eye-icon"><path d="M992 512.096c0-5.76-.992-10.592-1.28-11.136-.192-2.88-1.152-8.064-2.08-10.816-.256-.672-.544-1.376-.832-2.08-.48-1.568-1.024-3.104-1.6-4.32C897.664 290.112 707.104 160 512 160c-195.072 0-385.632 130.016-473.76 322.592-1.056 2.112-1.792 4.096-2.272 5.856a55.512 55.512 0 0 0-.64 1.6c-1.76 5.088-1.792 8.64-1.632 7.744-.832 3.744-1.568 11.168-1.568 11.168-.224 2.272-.224 4.032.032 6.304 0 0 .736 6.464 1.088 7.808.128 1.824.576 4.512 1.12 6.976h-.032c.448 2.08 1.12 4.096 1.984 6.08.48 1.536.992 2.976 1.472 4.032C126.432 733.856 316.992 864 512 864c195.136 0 385.696-130.048 473.216-321.696 1.376-2.496 2.24-4.832 2.848-6.912.256-.608.48-1.184.672-1.728 1.536-4.48 1.856-8.32 1.728-8.32l-.032.032c.608-3.104 1.568-7.744 1.568-13.28zM512 672c-88.224 0-160-71.776-160-160s71.776-160 160-160 160 71.776 160 160-71.776 160-160 160z" fill="currentColor"></path></svg> <span id="/roadmap/frontend/vue/template/setup-from-0/" data-flag-title="从 0 搭建项目模板（vue3）" class="leancloud_visitors"><span class="leancloud-visitors-count">...</span></span></span><span aria-label="写作日期📅" data-balloon-pos="down" class="time-info"><svg viewBox="0 0 1030 1024" xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 0 1-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 0 1-33.473-33.473V143.657H180.6A134.314 134.314 0 0 0 46.66 277.595v535.756A134.314 134.314 0 0 0 180.6 947.289h669.74a134.36 134.36 0 0 0 133.94-133.938V277.595a134.314 134.314 0 0 0-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 0 1-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 0 1-33.472 33.473z" fill="currentColor"></path></svg> <span property="datePublished">2022-6-8</span></span><!----><!----><span aria-label="阅读时间⌛" data-balloon-pos="down" class="reading-time-info"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon timer-icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z" fill="currentColor"></path></svg> <span>大约 28 分钟</span> <meta property="timeRequired" content="PT28M"></span></div> <!----> <hr></div> <div class="anchor-place-holder"><aside id="anchor"><div class="anchor-wrapper"><ul class="anchor-list"><li class="anchor"><a href="/roadmap/frontend/vue/template/setup-from-0/#项目技术方案" class="anchor-link heading2"><div>项目技术方案</div></a></li><li class="anchor"><a href="/roadmap/frontend/vue/template/setup-from-0/#项目结构" class="anchor-link heading2"><div>项目结构</div></a></li><li class="anchor"><a href="/roadmap/frontend/vue/template/setup-from-0/#环境检测" class="anchor-link heading2"><div>环境检测</div></a></li><li class="anchor"><a href="/roadmap/frontend/vue/template/setup-from-0/#搭建项目结构" class="anchor-link heading2"><div>搭建项目结构</div></a></li><li class="anchor"><a href="/roadmap/frontend/vue/template/setup-from-0/#初始化项目" class="anchor-link heading3"><div>初始化项目</div></a></li><li class="anchor"><a href="/roadmap/frontend/vue/template/setup-from-0/#整理项目结构" class="anchor-link heading3"><div>整理项目结构</div></a></li><li class="anchor"><a href="/roadmap/frontend/vue/template/setup-from-0/#修改-vite-的配置文件" class="anchor-link heading3"><div>修改 vite 的配置文件</div></a></li><li class="anchor"><a href="/roadmap/frontend/vue/template/setup-from-0/#安装网络工具-axios" class="anchor-link heading3"><div>安装网络工具 axios</div></a></li><li class="anchor"><a href="/roadmap/frontend/vue/template/setup-from-0/#安装路由工具-vue-router" class="anchor-link heading3"><div>安装路由工具 vue-router</div></a></li><li class="anchor"><a href="/roadmap/frontend/vue/template/setup-from-0/#安装状态管理工具-vuex" class="anchor-link heading3"><div>安装状态管理工具 vuex</div></a></li><li class="anchor"><a href="/roadmap/frontend/vue/template/setup-from-0/#安装-css-预编译器" class="anchor-link heading3"><div>安装 CSS 预编译器</div></a></li><li class="anchor"><a href="/roadmap/frontend/vue/template/setup-from-0/#安装-husky" class="anchor-link heading2"><div>安装 husky</div></a></li><li class="anchor"><a href="/roadmap/frontend/vue/template/setup-from-0/#husky-的错误解决方案" class="anchor-link heading3"><div>husky 的错误解决方案</div></a></li><li class="anchor"><a href="/roadmap/frontend/vue/template/setup-from-0/#添加代码规范" class="anchor-link heading2"><div>添加代码规范</div></a></li><li class="anchor"><a href="/roadmap/frontend/vue/template/setup-from-0/#配置-editorconfig" class="anchor-link heading3"><div>配置 EditorConfig</div></a></li><li class="anchor"><a href="/roadmap/frontend/vue/template/setup-from-0/#配置-prettier" class="anchor-link heading3"><div>配置 Prettier</div></a></li><li class="anchor"><a href="/roadmap/frontend/vue/template/setup-from-0/#配置-eslint" class="anchor-link heading3"><div>配置 ESLint</div></a></li><li class="anchor"><a href="/roadmap/frontend/vue/template/setup-from-0/#在-husky-中集成样式规范" class="anchor-link heading3"><div>在 husky 中集成样式规范</div></a></li><li class="anchor"><a href="/roadmap/frontend/vue/template/setup-from-0/#使用-lint-staged" class="anchor-link heading3"><div>使用 lint-staged</div></a></li><li class="anchor"><a href="/roadmap/frontend/vue/template/setup-from-0/#解决样式配置后出现的问题" class="anchor-link heading2"><div>解决样式配置后出现的问题</div></a></li><li class="anchor"><a href="/roadmap/frontend/vue/template/setup-from-0/#解决-prettier-行尾换行符报错" class="anchor-link heading3"><div>解决 Prettier 行尾换行符报错</div></a></li><li class="anchor"><a href="/roadmap/frontend/vue/template/setup-from-0/#解决-prettier-与-eslint-的冲突问题" class="anchor-link heading3"><div>解决 Prettier 与 ESLint 的冲突问题</div></a></li><li class="anchor"><a href="/roadmap/frontend/vue/template/setup-from-0/#解决通过-引入的路径问题" class="anchor-link heading3"><div>解决通过 @ 引入的路径问题</div></a></li><li class="anchor"><a href="/roadmap/frontend/vue/template/setup-from-0/#尝试保存文件时自动修复错误" class="anchor-link heading3"><div>尝试保存文件时自动修复错误</div></a></li><li class="anchor"><a href="/roadmap/frontend/vue/template/setup-from-0/#修复所有-vue-文件第一行首字符处出现-parsing-error-parseroptions-project-的错误" class="anchor-link heading3"><div>修复所有 vue 文件第一行首字符处出现 Parsing error: &quot;parserOptions.project&quot;... 的错误</div></a></li><li class="anchor"><a href="/roadmap/frontend/vue/template/setup-from-0/#修复-defineprops-等未定义的错误" class="anchor-link heading3"><div>修复 defineProps 等未定义的错误</div></a></li><li class="anchor"><a href="/roadmap/frontend/vue/template/setup-from-0/#修复-plugin-vite-eslint-的相关错误" class="anchor-link heading3"><div>修复 [plugin:vite:eslint] 的相关错误</div></a></li><li class="anchor"><a href="/roadmap/frontend/vue/template/setup-from-0/#添加提交规范" class="anchor-link heading2"><div>添加提交规范</div></a></li><li class="anchor"><a href="/roadmap/frontend/vue/template/setup-from-0/#集成-commitizen" class="anchor-link heading3"><div>集成 Commitizen</div></a></li><li class="anchor"><a href="/roadmap/frontend/vue/template/setup-from-0/#自定义提交配置" class="anchor-link heading3"><div>自定义提交配置</div></a></li><li class="anchor"><a href="/roadmap/frontend/vue/template/setup-from-0/#集成-commitlint" class="anchor-link heading3"><div>集成 commitlint</div></a></li><li class="anchor"><a href="/roadmap/frontend/vue/template/setup-from-0/#集成-standard-version" class="anchor-link heading3"><div>集成 Standard-Version</div></a></li><li class="anchor"><a href="/roadmap/frontend/vue/template/setup-from-0/#添加单元测试" class="anchor-link heading2"><div>添加单元测试</div></a></li><li class="anchor"><a href="/roadmap/frontend/vue/template/setup-from-0/#添加测试依赖" class="anchor-link heading3"><div>添加测试依赖</div></a></li><li class="anchor"><a href="/roadmap/frontend/vue/template/setup-from-0/#配置-jest" class="anchor-link heading3"><div>配置 jest</div></a></li><li class="anchor"><a href="/roadmap/frontend/vue/template/setup-from-0/#执行测试" class="anchor-link heading3"><div>执行测试</div></a></li><li class="anchor"><a href="/roadmap/frontend/vue/template/setup-from-0/#将测试集成到-husky-中" class="anchor-link heading3"><div>将测试集成到 husky 中</div></a></li><li class="anchor"><a href="/roadmap/frontend/vue/template/setup-from-0/#测试常见问题" class="anchor-link heading2"><div>测试常见问题</div></a></li><li class="anchor"><a href="/roadmap/frontend/vue/template/setup-from-0/#配置全局-key-之后的-vuex-如何测试" class="anchor-link heading3"><div>配置全局 key 之后的 vuex 如何测试</div></a></li></ul></div></aside></div> <!----> <div class="content__content-top"></div> <div class="theme-default-content content__default"><h1 id="从-0-搭建项目模板（vue3）"><a href="#从-0-搭建项目模板（vue3）" class="header-anchor">#</a> 从 0 搭建项目模板（vue3）</h1> <p>为简化每次初始化项目，最好的方法就是搭建一个项目模板，这样每次初始化的时候直接拉取就好，不用再一个一个进行配置，省去了大量时间。</p> <p>该内容模板已经在 <a href="https://github.com/jeremyjone/vue3-ts-template" target="_blank" rel="noopener noreferrer">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，如果需要，可以直接下载使用。具体使用方法可以查看 <a href="https://github.com/jeremyjone/vue3-ts-template" target="_blank" rel="noopener noreferrer">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 或者 <a href="/roadmap/frontend/vue/template/" class="router-link-active">模板文档</a></p> <h2 id="项目技术方案"><a href="#项目技术方案" class="header-anchor">#</a> 项目技术方案</h2> <p>这套模板采用如下方案：</p> <ul><li>搭建工具 <a href="https://cn.vitejs.dev/" target="_blank" rel="noopener noreferrer">vite 2.x<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>项目框架 <a href="https://v3.cn.vuejs.org/" target="_blank" rel="noopener noreferrer">vue 3.x<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>网络连接 <a href="https://axios-http.com/" target="_blank" rel="noopener noreferrer">axios 4.x<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>路由工具 <a href="https://next.router.vuejs.org/zh/index.html" target="_blank" rel="noopener noreferrer">vue-router 4.x<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>状态管理 <a href="https://next.vuex.vuejs.org/zh/guide" target="_blank" rel="noopener noreferrer">vuex 4.x<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>编程语言 <a href="https://www.typescriptlang.org/" target="_blank" rel="noopener noreferrer">TypeScript<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <p>同时预装了如下内容：</p> <ul><li>CSS 编译<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup> <a href="https://www.sass.hk/docs/" target="_blank" rel="noopener noreferrer">sass<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> / <a href="https://less.bootcss.com/" target="_blank" rel="noopener noreferrer">less<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> / <a href="https://www.stylus-lang.cn/" target="_blank" rel="noopener noreferrer">stylus<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>单元测试 <a href="https://next.vue-test-utils.vuejs.org/guide/" target="_blank" rel="noopener noreferrer">vue-test-utils<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> + <a href="https://jestjs.io/" target="_blank" rel="noopener noreferrer">jest<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>代码规范 <a href="https://eslint.org/" target="_blank" rel="noopener noreferrer">eslint<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> + <a href="https://prettier.io/" target="_blank" rel="noopener noreferrer">prettier<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>提交规范 <a href="https://github.com/commitizen/cz-cli" target="_blank" rel="noopener noreferrer">commitizen<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> + <a href="https://commitlint.js.org/#/" target="_blank" rel="noopener noreferrer">commitlint<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> + <a href="https://github.com/conventional-changelog/standard-version" target="_blank" rel="noopener noreferrer">standard-version<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>Git hooks <a href="https://typicode.github.io/husky" target="_blank" rel="noopener noreferrer">husky<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h2 id="项目结构"><a href="#项目结构" class="header-anchor">#</a> 项目结构</h2> <p>最终的目录文件结构如下图：</p> <img src="/assets/roadmap/vue/template/template_dir.png" alt=""> <blockquote><p>注：目录结构仅供参考，可以根据自行需求进行修改。</p></blockquote> <h2 id="环境检测"><a href="#环境检测" class="header-anchor">#</a> 环境检测</h2> <p>因为采用了 <code>vite</code> 进行搭建，所以需要 <a href="https://nodejs.org/en/" target="_blank" rel="noopener noreferrer">Node.js<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 版本 &gt;= 12.0.0。</p> <p>查看版本的方法：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>node -v
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><img src="/assets/roadmap/vue/template/check_node_version.png" alt=""> <h2 id="搭建项目结构"><a href="#搭建项目结构" class="header-anchor">#</a> 搭建项目结构</h2> <h3 id="初始化项目"><a href="#初始化项目" class="header-anchor">#</a> 初始化项目</h3> <p>首先使用 <code>vite</code> 创建项目。根据 <a href="https://cn.vitejs.dev/guide/#scaffolding-your-first-vite-project" target="_blank" rel="noopener noreferrer">vite 官方文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，可以快速开始：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">npm</span> init vite@lastest
// or
<span class="token function">yarn</span> create vite
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><img src="/assets/roadmap/vue/template/create_app.png" alt=""> <p>然后按照提示一步一步操作即可。</p> <p>1、填写名称</p> <p>这里填写 <code>vite-vue3-ts-template</code>，方便我们大致知道模板的架构。</p> <p>2、选择框架</p> <p>这里我们选择 <code>vue</code>，</p> <img src="/assets/roadmap/vue/template/create_app_select_framework.png" alt=""> <p>然后选择 <code>vue-ts</code>。</p> <img src="/assets/roadmap/vue/template/create_app_select_ts.png" alt=""> <p>这样，我们就成功初始化了一个项目。</p> <img src="/assets/roadmap/vue/template/create_app_finish.png" alt=""> <p>此时根据提示，进入项目根目录，并执行 <code>yarn</code> 命令，会自动安装相应的内容。</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token builtin class-name">cd</span> vite-vue3-ts-template
<span class="token function">yarn</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>在执行之后，启动项目，会看到已经成功运行了。</p> <img src="/assets/roadmap/vue/template/app_first_run.png" alt=""> <h3 id="整理项目结构"><a href="#整理项目结构" class="header-anchor">#</a> 整理项目结构</h3> <p>在 <code>src</code> 文件夹下，新建如下文件/文件夹：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>└── src/
    ├── assets/             <span class="token comment"># 静态资源目录</span>
    ├── components/         <span class="token comment"># 公共组件目录</span>
    ├── pages/              <span class="token comment"># 页面组件目录</span>
    ├── router/             <span class="token comment"># 路由配置目录</span>
    ├── store/              <span class="token comment"># 状态管理配置目录</span>
    ├── typings/            <span class="token comment"># 类型文件目录</span>
    ├── styles/             <span class="token comment"># 通用 CSS 目录</span>
    ├── utils/              <span class="token comment"># 工具方法目录</span>
    ├── App.vue             <span class="token comment"># 根组件</span>
    ├── env.d.ts            <span class="token comment"># vue 环境声明，不同版本的 vite 文件可能会有所差异</span>
    ├── main.ts             <span class="token comment"># 主文件</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>我们之后的内容，基本都是基于上面结构进行的。</p> <h3 id="修改-vite-的配置文件"><a href="#修改-vite-的配置文件" class="header-anchor">#</a> 修改 vite 的配置文件</h3> <p><code>vite</code> 的配置在根目录下的 <code>vite.config.ts</code> 中，我们根据需要进行一些修改：</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vite&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> vue <span class="token keyword">from</span> <span class="token string">&quot;@vitejs/plugin-vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> resolve <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;path&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// https://vitejs.dev/config/</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>

  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 配置 @ 映射到 src 目录</span>
    alias<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;@&quot;</span><span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;src&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  base<span class="token operator">:</span> <span class="token string">&quot;./&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 打包路径</span>

  server<span class="token operator">:</span> <span class="token punctuation">{</span>
    port<span class="token operator">:</span> <span class="token number">3000</span><span class="token punctuation">,</span> <span class="token comment">// 端口</span>
    open<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 启动打开浏览器</span>
    cors<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 跨域</span>
    proxy<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;/api&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        target<span class="token operator">:</span> <span class="token string">&quot;http://localhost:8080/api/&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 目标地址</span>
        changeOrigin<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 修改源</span>
        secure<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// ssl</span>
        <span class="token function-variable function">rewrite</span><span class="token operator">:</span> path <span class="token operator">=&gt;</span> path<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;/api/&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">提示</p> <p>在这里，当导入 <code>&quot;path&quot;</code> 时，可能会提示 <code>找不到模块的类型声明</code>：</p> <img src="/assets/roadmap/vue/template/cannot_find_path_module_declare.png" alt=""> <p>此时按照提示直接安装 <code>@types/node</code> 即可。</p> <p>或者手动安装：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">yarn</span> <span class="token function">add</span> @types/node -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></div> <h3 id="安装网络工具-axios"><a href="#安装网络工具-axios" class="header-anchor">#</a> 安装网络工具 axios</h3> <p>1、直接命令安装最新版即可：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">yarn</span> <span class="token function">add</span> axios
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>2、配置</p> <p>为了方便使用，我们需要进行简单配置。</p> <p>在 <code>utils</code> 文件夹下创建一个 <code>http</code> 的文件夹，并在其中创建一个 <code>index.ts</code> 文件，结构如下：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>src
└── utils/
    ├── http/
        ├── index.ts      <span class="token comment"># axios 配置文件</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>在文件中填入如下内容：</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> Axios <span class="token keyword">from</span> <span class="token string">&quot;axios&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> baseURL <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> axios <span class="token operator">=</span> Axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  baseURL<span class="token punctuation">,</span> <span class="token comment">// 基础 url</span>
  timeout<span class="token operator">:</span> <span class="token number">10000</span> <span class="token comment">// 超时 10s</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 请求拦截器</span>
axios<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
  config <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// TODO: 配置请求内容</span>

    <span class="token comment">// config.headers.Authorization = `Bearer ${token}`;</span>
    <span class="token keyword">return</span> config<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  error <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 响应拦截器</span>
axios<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
  response <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// TODO: 配置对响应内容的处理</span>

    <span class="token keyword">return</span> response<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  error <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token punctuation">{</span> response <span class="token punctuation">}</span> <span class="token operator">=</span> error<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>error <span class="token operator">&amp;&amp;</span> error<span class="token punctuation">.</span>response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">switch</span> <span class="token punctuation">(</span>error<span class="token punctuation">.</span>response<span class="token punctuation">.</span>status<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token number">400</span><span class="token operator">:</span>
          response<span class="token punctuation">.</span>message <span class="token operator">=</span> <span class="token string">&quot;未知错误&quot;</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token number">401</span><span class="token operator">:</span>
          response<span class="token punctuation">.</span>message <span class="token operator">=</span> <span class="token string">&quot;未授权&quot;</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token number">403</span><span class="token operator">:</span>
          response<span class="token punctuation">.</span>message <span class="token operator">=</span> <span class="token string">&quot;权限不足&quot;</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token number">404</span><span class="token operator">:</span>
          response<span class="token punctuation">.</span>message <span class="token operator">=</span> <span class="token string">&quot;数据不存在&quot;</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token number">405</span><span class="token operator">:</span>
          response<span class="token punctuation">.</span>message <span class="token operator">=</span> <span class="token string">&quot;不允许的请求方法&quot;</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token number">408</span><span class="token operator">:</span>
          response<span class="token punctuation">.</span>message <span class="token operator">=</span> <span class="token string">&quot;请求超时&quot;</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token number">415</span><span class="token operator">:</span>
          response<span class="token punctuation">.</span>message <span class="token operator">=</span> <span class="token string">&quot;不支持的媒体类型&quot;</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token number">500</span><span class="token operator">:</span>
          response<span class="token punctuation">.</span>message <span class="token operator">=</span> <span class="token string">&quot;服务器出现异常&quot;</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token number">501</span><span class="token operator">:</span>
          response<span class="token punctuation">.</span>message <span class="token operator">=</span> <span class="token string">&quot;网络未实现&quot;</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token number">502</span><span class="token operator">:</span>
          response<span class="token punctuation">.</span>message <span class="token operator">=</span> <span class="token string">&quot;网络错误&quot;</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token number">503</span><span class="token operator">:</span>
          response<span class="token punctuation">.</span>message <span class="token operator">=</span> <span class="token string">&quot;服务不可用&quot;</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token number">504</span><span class="token operator">:</span>
          response<span class="token punctuation">.</span>message <span class="token operator">=</span> <span class="token string">&quot;网络超时&quot;</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token number">505</span><span class="token operator">:</span>
          response<span class="token punctuation">.</span>message <span class="token operator">=</span> <span class="token string">&quot;http版本不支持该请求&quot;</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">default</span><span class="token operator">:</span>
          response<span class="token punctuation">.</span>message <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">其他错误。错误代码：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>error<span class="token punctuation">.</span>response<span class="token punctuation">.</span>status<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      response <span class="token operator">=</span> <span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token string">&quot;无法连接到服务器！&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> axios<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br></div></div><p>3、封装使用方法</p> <p>为了方便使用，我们最好将其常用的 <code>get</code>、<code>post</code>、<code>put</code>、<code>delete</code> 进行二次封装。</p> <p>在 <code>index.ts</code> 同级目录下创建一个 <code>requests.ts</code> 文件，结构如下：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>src
└── utils/
    ├── http/
        ├── index.ts      <span class="token comment"># axios 配置文件</span>
        ├── requests.ts   <span class="token comment"># 方法封装</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>在文件中键入如下内容：</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">&quot;.&quot;</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @param  promise
 * @param errorExt - Additional Information you can pass to the err object
 */</span>
<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">to</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span> <span class="token operator">=</span> <span class="token builtin">unknown</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
  promise<span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
  errorExt<span class="token operator">?</span><span class="token operator">:</span> object
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token constant">U</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token constant">T</span> <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> promise
    <span class="token punctuation">.</span><span class="token generic-function"><span class="token function">then</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>data<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token keyword">null</span><span class="token punctuation">,</span> data<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token generic-function"><span class="token function">catch</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token constant">U</span><span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>err <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>errorExt<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> errorExt<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">return</span> <span class="token punctuation">[</span>err<span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * GET methods
 * @param url
 * @param data
 * @returns {Promise}
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token generic-function"><span class="token function">get</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>url<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> params <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">TO</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">to</span><span class="token punctuation">(</span>
    <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Promise</span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      axios
        <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token punctuation">{</span>
          params
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>result <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token function">resolve</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data <span class="token keyword">as</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>err <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * POST methods
 * @param url
 * @param data
 * @returns {Promise}
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token generic-function"><span class="token function">post</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>url<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> data<span class="token operator">?</span><span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">unknown</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">TO</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">to</span><span class="token punctuation">(</span>
    <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Promise</span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      axios
        <span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> data<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>result <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token function">resolve</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data <span class="token keyword">as</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>err <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * PUT methods
 * @param url
 * @param data
 * @returns {Promise}
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token generic-function"><span class="token function">put</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>url<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> data<span class="token operator">?</span><span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">unknown</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">TO</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">to</span><span class="token punctuation">(</span>
    <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Promise</span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      axios
        <span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> data<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>result <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token function">resolve</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data <span class="token keyword">as</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>err <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * DELETE methods
 * @param url
 * @param data
 * @returns {Promise}
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token generic-function"><span class="token function">del</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>url<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> data<span class="token operator">?</span><span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">unknown</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">TO</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">to</span><span class="token punctuation">(</span>
    <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Promise</span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      axios
        <span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> data<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>result <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token function">resolve</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data <span class="token keyword">as</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>err <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br></div></div><p>4、类型声明</p> <p>注意到我这里为了更好的使用 <code>Promise</code>，对其返回值进行了一个封装，但是其返回类型 <code>TO</code> 并没有定义，编译器同时会报错。我们在 <code>typings</code> 文件夹中创建一个 <code>http.d.ts</code> 的文件，并进行声明：</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">declare</span> <span class="token keyword">type</span> <span class="token class-name"><span class="token constant">TO</span><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token operator">=</span> <span class="token builtin">unknown</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token builtin">unknown</span><span class="token punctuation">,</span> <span class="token constant">T</span> <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>此时声明好了，同时错误也没有了。</p> <h3 id="安装路由工具-vue-router"><a href="#安装路由工具-vue-router" class="header-anchor">#</a> 安装路由工具 vue-router</h3> <p>1、安装 vue-router</p> <p>因为我们用的是 <code>vue3</code>，所以需要 <code>vue-router 4.x</code>，直接带版本安装即可：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">yarn</span> <span class="token function">add</span> vue-router@4
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>在 <code>router</code> 文件夹下创建 <code>index.ts</code> 文件，结构如下：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>src
└── router/
    ├── index.ts      <span class="token comment"># vue-router 配置文件</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>并键入如下内容：</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createRouter<span class="token punctuation">,</span> createWebHistory<span class="token punctuation">,</span> RouteRecordRaw <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue-router&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">&quot;@/pages/Home.vue&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> routes<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span>RouteRecordRaw<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">&quot;Home&quot;</span><span class="token punctuation">,</span>
    component<span class="token operator">:</span> Home
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// TODO: 填写其他页面路由内容</span>
  <span class="token punctuation">{</span>
    <span class="token comment">// 匹配全部其他内容</span>
    path<span class="token operator">:</span> <span class="token string">&quot;/:pathMatch(.*)*&quot;</span><span class="token punctuation">,</span>
    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: &quot;404&quot; */</span> <span class="token string">&quot;@/pages/404.vue&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  history<span class="token operator">:</span> <span class="token function">createWebHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  routes
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 路由拦截器</span>
router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// TODO: 自定义拦截内容</span>

  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> router<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p>2、挂载路由</p> <p>打开 <code>main.ts</code> 文件，并修改挂载路由：</p> <div class="language-ts line-numbers-mode"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br><div class="highlighted"> </div><br><br></div><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&quot;./App.vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">&quot;./router/index&quot;</span><span class="token punctuation">;</span>

<span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">&quot;#app&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>3、配置路由页面</p> <p>为了测试它的效果，我们需要添加几个简单页面，同时配置路由页面。</p> <p>打开 <code>App.vue</code> 文件，删除 <code>HelloWorld</code> 组件，并在模板中替换为 <code>&lt;router-view /&gt;</code> 组件：</p> <div class="language-vue line-numbers-mode"><div class="highlight-lines"><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Vue logo<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./assets/logo.png<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">#app</span> <span class="token punctuation">{</span>
  <span class="token property">font-family</span><span class="token punctuation">:</span> Avenir<span class="token punctuation">,</span> Helvetica<span class="token punctuation">,</span> Arial<span class="token punctuation">,</span> sans-serif<span class="token punctuation">;</span>
  <span class="token property">-webkit-font-smoothing</span><span class="token punctuation">:</span> antialiased<span class="token punctuation">;</span>
  <span class="token property">-moz-osx-font-smoothing</span><span class="token punctuation">:</span> grayscale<span class="token punctuation">;</span>
  <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #2c3e50<span class="token punctuation">;</span>
  <span class="token property">margin-top</span><span class="token punctuation">:</span> 60px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>然后在 <code>pages</code> 文件夹中创建两个文件，<code>Home.vue</code> 和 <code>404.vue</code>：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>src
└── pages/
    ├── <span class="token number">404</span>.vue
    ├── Home.vue
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>内容分别如下：</p> <ul><li>Home.vue</li></ul> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Home Page<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HelloWorld</span> <span class="token attr-name">msg</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Welcome to Vite + Vue3 + TypeScript Template<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> HelloWorld <span class="token keyword">from</span> <span class="token string">&quot;@/components/HelloWorld.vue&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&quot;HomePage&quot;</span><span class="token punctuation">,</span>

  components<span class="token operator">:</span> <span class="token punctuation">{</span> HelloWorld <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><ul><li>404.vue</li></ul> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>页面不存在<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>对不起，您访问的页面不存在。<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onBack<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>返回<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">onBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">go</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>现在启动项目，会打开 Home 页，随意输入一个路由，它会匹配到 404 页面，点击 <code>返回</code> 按钮，又回到了 Home 页面。</p> <p>到这里，路由就配置完成。</p> <h3 id="安装状态管理工具-vuex"><a href="#安装状态管理工具-vuex" class="header-anchor">#</a> 安装状态管理工具 vuex</h3> <p>1、安装 vuex</p> <p>与 <a href="#%E5%AE%89%E8%A3%85%E8%B7%AF%E7%94%B1%E5%B7%A5%E5%85%B7-vue-router">vue-router</a> 一样，因为我们用的是 <code>vue3</code>，所以需要 <code>vuex 4.x</code>，直接带版本安装即可：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">yarn</span> <span class="token function">add</span> vuex@next --save
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>在 <code>store</code> 文件夹下创建 <code>index.ts</code> 文件，结构如下：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>src
└── store/
    ├── index.ts      <span class="token comment"># vuex 配置文件</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>并键入如下内容：</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vuex&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">createStore</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  state<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// TODO: 根据实际内容修改</span>
    count<span class="token operator">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  mutations<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  actions<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  modules<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>2、全局挂载 vuex</p> <p>打开 <code>main.ts</code> 文件，并添加 <code>vuex</code>，挂载到全局中：</p> <div class="language-ts line-numbers-mode"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br><br><div class="highlighted"> </div><br><br></div><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&quot;./App.vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">&quot;./router/index&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">&quot;./store/index&quot;</span><span class="token punctuation">;</span>

<span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>store<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">&quot;#app&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>3、在组件中使用 vuex</p> <p>此时可以使用。为了方便测试，我们在 <code>store/index.ts</code> 文件中添加修改方法：</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">createStore</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  state<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// TODO: 根据实际内容修改</span>
    count<span class="token operator">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  mutations<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">increment</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      state<span class="token punctuation">.</span>count<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  actions<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">increment</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> commit <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">&quot;increment&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  modules<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>同时修改 <code>HelloWorld.vue</code> 中的内容，删除原来的 <code>count</code> 属性，使用 <code>store</code> 中的属性：</p> <div class="language-vue line-numbers-mode"><div class="highlight-lines"><br><div class="highlighted"> </div><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br></div><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> useStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vuex&quot;</span><span class="token punctuation">;</span>

defineProps<span class="token operator">&lt;</span><span class="token punctuation">{</span> msg<span class="token operator">:</span> string <span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// const count = ref(0)</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">useStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">&quot;increment&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>{{ msg }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>

  <span class="token comment">&lt;!-- ... other code ... --&gt;</span>

  <span class="token comment">&lt;!-- &lt;button type=&quot;button&quot; @click=&quot;count++&quot;&gt;count is: {{ count }}&lt;/button&gt; --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>increment<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    count is: {{ store.state.count }}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>运行项目测试，可以正常运行。</p> <p>4、类型声明</p> <p>此时虽然可以正常，但是我们可以看到，当我们使用 <code>store.state</code> 时，类型是任意的，我们看不到内部任何属性，当然就更看不到属性值的类型了，这显然不符合我们使用 TypeScript 的需求。</p> <img src="/assets/roadmap/vue/template/vuex_any_type.png" alt=""> <p>为解决这个问题，我们需要对 <code>store/index.ts</code> 进行一些改造。</p> <p>首先声明一个 <code>State</code> 的类型：</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">State</span> <span class="token punctuation">{</span>
  <span class="token comment">// TODO: 根据 state 实际内容修改</span>
  count<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>然后声明一个 <code>Key</code>，这里 <code>vue</code> 已经帮我们提供了一个解决方案：</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> InjectionKey <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> key<span class="token operator">:</span> InjectionKey<span class="token operator">&lt;</span>Store<span class="token operator">&lt;</span>State<span class="token operator">&gt;&gt;</span> <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&quot;store_key&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// key 内容随便填</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>现在我们可以通过传入对应的 <code>key</code> 来访问对应的 <code>State</code>。</p> <p>再次打开 <code>HelloWorld.vue</code>，现在我们把 <code>key</code> 值传入 <code>useStore</code> 中，即：</p> <div class="language-ts line-numbers-mode"><div class="highlight-lines"><br><div class="highlighted"> </div><div class="highlighted"> </div><br></div><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vuex&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> key <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../store&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">useStore</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>现在就可以看到类型已经可以正常显示了：</p> <img src="/assets/roadmap/vue/template/vuex_state_type.png" alt=""> <p>到目前，它好像看起来很正常了。但是随着页面变多，我们需要在每一个页面都传入 <code>key</code> 值，这是一个相当繁琐的事情，我们需要一个更简便的方法，有没有呢？答案是肯定的。</p> <p>5、改造类型声明，简化它</p> <p>在 <code>store/index.ts</code> 中简单封装一个 <code>useStore</code>：</p> <div class="language-ts line-numbers-mode"><div class="highlight-lines"><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br></div><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> InjectionKey <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createStore<span class="token punctuation">,</span> useStore <span class="token keyword">as</span> baseUseStore<span class="token punctuation">,</span> Store <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vuex&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">State</span> <span class="token punctuation">{</span>
  <span class="token comment">// TODO: 根据 state 实际内容修改</span>
  count<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> key<span class="token operator">:</span> InjectionKey<span class="token operator">&lt;</span>Store<span class="token operator">&lt;</span>State<span class="token operator">&gt;&gt;</span> <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&quot;store_key&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// key 内容随便填</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">createStore</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  state<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// TODO: 根据实际内容修改</span>
    count<span class="token operator">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  mutations<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  actions<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  modules<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">useStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">baseUseStore</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>然后在 <code>main.ts</code> 文件中挂载这个 <code>key</code> 值即可：</p> <div class="language-ts line-numbers-mode"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br><br><div class="highlighted"> </div><br><br></div><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&quot;./App.vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">&quot;./router/index&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> store<span class="token punctuation">,</span> <span class="token punctuation">{</span> key <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./store/index&quot;</span><span class="token punctuation">;</span>

<span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>store<span class="token punctuation">,</span> key<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">&quot;#app&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>现在我们每次导入 <code>useStore</code> 时，不需要再从 <code>vuex</code> 中导入，而是通过 <code>@/store</code> 导入即可，使用上没有其他区别。</p> <p>这样，我们就将 <code>vuex</code> 完整的配置好了。</p> <h3 id="安装-css-预编译器"><a href="#安装-css-预编译器" class="header-anchor">#</a> 安装 CSS 预编译器</h3> <p>根据项目需要添加对应的预编译器：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">yarn</span> <span class="token function">add</span> stylus -D  <span class="token comment"># stylus</span>
<span class="token function">yarn</span> <span class="token function">add</span> sass -D    <span class="token comment"># sass / scss</span>
<span class="token function">yarn</span> <span class="token function">add</span> <span class="token function">less</span> -D    <span class="token comment"># less</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>这个根据需要对应安装即可。</p> <h2 id="安装-husky"><a href="#安装-husky" class="header-anchor">#</a> 安装 husky</h2> <p><code>husky</code> 是一个钩子工具，它可以帮助我们在一些特定时候触发一些特定的功能。比如我们在提交代码的时候，需要验证代码是否符合规则，这时候可以通过 <code>husky</code> 很方便的实现。</p> <blockquote><p>因为后面的内容基本都需要用到 <code>husky</code>，所以我们首先把它添加到模板中。</p></blockquote> <p>1、通过脚本直接安装并配置 <code>husky</code>：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>npx husky-init
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>它会在项目根目录下创建一个名为 <code>.husky</code> 的文件夹，同时在里面生成相关文件。</p> <img src="/assets/roadmap/vue/template/husky_added.png" alt=""> <p>2、然后执行：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">yarn</span>
<span class="token comment"># or</span>
<span class="token function">npm</span> <span class="token function">install</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>安装 <code>husky</code> 到项目中。</p> <p><code>husky</code> 包含很多钩子，我们常用的有 <code>pre-commit</code>、<code>pre-push</code> 等，从名字就很清晰的知道它应该在什么时候调用。我们在后面需要经常用到这些钩子还帮助我们规范项目。</p> <h3 id="husky-的错误解决方案"><a href="#husky-的错误解决方案" class="header-anchor">#</a> husky 的错误解决方案</h3> <ul><li>Yarn on Windows</li></ul> <p>对于 <code>Windows 10</code> 的用户，在使用 <code>yarn</code> 的时候，可能存在执行 <code>pre-push</code> 的时候出现 <code>stdin is not a tty</code> 的错误。</p> <p>这时需要在 <code>.husky</code> 文件夹下创建一个名为 <code>common.sh</code> 的文件，并键入如下内容：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function-name function">command_exists</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin class-name">command</span> -v <span class="token string">&quot;<span class="token variable">$1</span>&quot;</span> <span class="token operator">&gt;</span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span>
<span class="token punctuation">}</span>

<span class="token comment"># Workaround for Windows 10, Git Bash and Yarn</span>
<span class="token keyword">if</span> command_exists winpty <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">test</span> -t <span class="token number">1</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token builtin class-name">exec</span> <span class="token operator">&lt;</span> /dev/tty
<span class="token keyword">fi</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>然后就可以在钩子文件中使用 <code>yarn</code> 命令了。<a href="https://typicode.github.io/husky/#/?id=yarn-on-windows" target="_blank" rel="noopener noreferrer">参考<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="添加代码规范"><a href="#添加代码规范" class="header-anchor">#</a> 添加代码规范</h2> <p>随着代码越来越复杂，写代码的人越来越多，代码的格式可能会越来越眼花缭乱。为避免这些问题，代码规范就必不可少。</p> <p>良好的代码规范可以有效避免团队之间的代码风格差异化，提高审查代码效率等等。</p> <p>通常情况下，使用简单的 <a href="https://eslint.org/" target="_blank" rel="noopener noreferrer">eslint<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> + <a href="https://prettier.io/" target="_blank" rel="noopener noreferrer">prettier<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 就可以保持大部分规范，同时 <code>vue</code> 也提供了对应的 <a href="https://eslint.vuejs.org/rules" target="_blank" rel="noopener noreferrer">vue-eslint<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，也可以查看 <code>vue</code> 的 <a href="https://v3.cn.vuejs.org/style-guide" target="_blank" rel="noopener noreferrer">风格指南<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <h3 id="配置-editorconfig"><a href="#配置-editorconfig" class="header-anchor">#</a> 配置 EditorConfig</h3> <p><code>EditorConfig</code> 是编辑器风格配置，可以帮助多人或者多设备统一编辑器风格。</p> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p><code>VS Code</code> 中需要插件 <code>EditorConfig for VS Code</code></p> <img src="/assets/roadmap/vue/template/vscode_editorconfig.png" alt=""> <p>在 <code>JetBrains</code> 系列如 <code>WebStorm</code> 中，则默认支持。</p></div> <p>在根目录下创建一个名为 <code>.editorconfig</code> 的配置文件：</p> <div class="language-config line-numbers-mode"><pre class="language-text"><code># Editor configuration, see http://editorconfig.org

root = true                        # 是否为根目录，支持不同层级单独配置

[*]                                # 适用所有文件
indent_style = space               # tab | space
indent_size = 4                    # 缩进
end_of_line = crlf                 # lf | cr | crlf
charset = utf-8                    # 字符集
trim_trailing_whitespace = true    # 自动切掉首尾空格
insert_final_newline = true        # 末尾空行

[*.{js,ts,vue,jsx,tsx}]            # 如何处理这些文件
indent_size = 2                    # 缩进为 2

[*.md]                             # 如何处理这些文件
trim_trailing_whitespace = false   # 不自动切掉首尾空格
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="配置-prettier"><a href="#配置-prettier" class="header-anchor">#</a> 配置 Prettier</h3> <p><code>Prettier</code> 是一个格式化文档工具，可以快速将我们的代码格式化为统一风格。</p> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p><code>VS Code</code> 中需要插件 <code>Prettier - Code formatter</code></p> <img src="/assets/roadmap/vue/template/vscode_prettier_plugin.png" alt=""> <p>在 <code>JetBrains</code> 系列如 <code>WebStorm</code> 中，则默认支持。</p></div> <p>1、安装 Prettier</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">yarn</span> <span class="token function">add</span> prettier -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>2、配置 Prettier</p> <p>在根目录下创建名为 <code>.prettierrc</code> 的文件，并键入如下内容：</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;useTabs&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;tabWidth&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token property">&quot;printWidth&quot;</span><span class="token operator">:</span> <span class="token number">80</span><span class="token punctuation">,</span>
  <span class="token property">&quot;singleQuote&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;trailingComma&quot;</span><span class="token operator">:</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;bracketSpacing&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;semi&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;arrowParens&quot;</span><span class="token operator">:</span> <span class="token string">&quot;avoid&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>具体内容可以根据需要调整，具体可以参考 <a href="https://prettier.io/docs/en/options.html" target="_blank" rel="noopener noreferrer">官方文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <p>3、使用 Prettier</p> <p>通过命令可以快速对指定文档进行格式化，也可以通过右键或者快捷方式(<code>Alt</code>+<code>Shift</code>+<code>F</code>)进行格式化。</p> <p>格式化命令：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>npx prettier --write <span class="token builtin class-name">.</span>    <span class="token comment"># . 表示所有文档</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="配置-eslint"><a href="#配置-eslint" class="header-anchor">#</a> 配置 ESLint</h3> <p><code>ESLint</code> 可以查找并提示代码中的问题，并支持自动修复（如果可以），通过严格的规范检查来控制代码质量。</p> <p>相信不少人都被 <code>ESLint</code> 虐过，初接触时，满屏的红色，那叫一个酸爽，但是随着使用的深入，它一定会给你带来质的变化。</p> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p><code>VS Code</code> 中需要插件 <code>ESLint</code></p> <img src="/assets/roadmap/vue/template/vscode_eslint_plugin.png" alt=""> <p>在 <code>JetBrains</code> 系列如 <code>WebStorm</code> 中，则默认支持。</p></div> <p>1、安装 ESLint</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">yarn</span> <span class="token function">add</span> eslint -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>2、配置 ESLint</p> <p>安装后，通过 <code>npx eslint --init</code> 可以快速创建配置：</p> <img src="/assets/roadmap/vue/template/add_eslint_init.png" alt=""> <p>这里我们直接依次照图选择即可，并选择一个最流行的规则，即 <a href="https://github.com/airbnb/javascript" target="_blank" rel="noopener noreferrer">Airbnb<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <p>最后，如果不选择使用 npm 安装，可以手动进行安装：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">yarn</span> <span class="token function">add</span> eslint-plugin-vue eslint-config-airbnb-base eslint-plugin-import @typescript-eslint/eslint-plugin @typescript-eslint/parser -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>执行完成，会在根目录下创建一个名为 <code>.eslintrc.js</code> 的配置文件：</p> <div class="language-js line-numbers-mode"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br></div><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  env<span class="token operator">:</span> <span class="token punctuation">{</span>
    browser<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    es2021<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    node<span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;plugin:vue/essential&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;airbnb-base&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  parserOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
    ecmaVersion<span class="token operator">:</span> <span class="token number">13</span><span class="token punctuation">,</span>
    parser<span class="token operator">:</span> <span class="token string">&quot;@typescript-eslint/parser&quot;</span><span class="token punctuation">,</span>
    sourceType<span class="token operator">:</span> <span class="token string">&quot;module&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;vue&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;@typescript-eslint&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  rules<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>可以根据实际情况增删内容。</p> <p>然后添加针对 <code>vue</code> 的规则配置：</p> <ul><li>添加高亮行内容到文件中：</li></ul> <div class="language-js line-numbers-mode"><div class="highlight-lines"><br><br><br><br><div class="highlighted"> </div><br><br><br></div><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;plugin:vue/essential&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;airbnb-base&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;plugin:vue/vue3-recommended&quot;</span> <span class="token comment">// 添加该行内容，针对 vue3 的规则。如果是 vue2，则是 plugin:vue/recommended</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>添加 parser</li></ul> <div class="language-js line-numbers-mode"><div class="highlight-lines"><br><div class="highlighted"> </div><br><br><br><br><br><br></div><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  parser<span class="token operator">:</span> <span class="token string">&quot;vue-eslint-parser&quot;</span><span class="token punctuation">,</span>
  parserOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
    parser<span class="token operator">:</span> <span class="token string">&quot;@typescript-eslint/parser&quot;</span><span class="token punctuation">,</span>
    sourceType<span class="token operator">:</span> <span class="token string">&quot;module&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>此时如果文件有错误，则会显示出来。<strong>如果没显示出来，重启编译器再试。</strong></p> <p>3、添加 TypeScript 支持</p> <p>对于 <code>airbnb-base</code> 来说，需要单独添加 <code>TypeScript</code> 的支持。</p> <p>安装插件：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">yarn</span> <span class="token function">add</span> eslint-config-airbnb-typescript -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>在 <code>.eslintrc.js</code> 中添加如下内容：</p> <div class="language-js line-numbers-mode"><div class="highlight-lines"><br><br><br><br><div class="highlighted"> </div><br><br><br><br></div><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;plugin:vue/essential&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;airbnb-base&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;airbnb-typescript/base&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 添加 typescript 支持</span>
    <span class="token string">&quot;plugin:vue/vue3-recommended&quot;</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>4、使用 ESLint</p> <p>在 <code>package.json</code> 文件的 <code>scripts</code> 字段中添加如下内容：</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;lint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eslint src/**/*.{js,vue,ts,jsx,tsx}&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;lint:fix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eslint src/**/*.{js,vue,ts,jsx,tsx} --fix&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;lint:create&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eslint --init&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>然后执行：<code>yarn lint:fix</code> 即可修复所有内容，如果此时报错，则需要手动修复。</p> <p>5、常用的 vue 规则</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  rules<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;vue/no-multiple-template-root&quot;</span><span class="token operator">:</span> <span class="token string">&quot;off&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 启用根层级多个标签</span>
    <span class="token string">&quot;vue/script-setup-uses-vars&quot;</span><span class="token operator">:</span> <span class="token string">&quot;error&quot;</span> <span class="token comment">// 标记 setup 中的变量为 used</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="在-husky-中集成样式规范"><a href="#在-husky-中集成样式规范" class="header-anchor">#</a> 在 husky 中集成样式规范</h3> <p>我们不想每次都手动执行命令来修正代码样式，那么可以通过 <code>husky</code> 的钩子，在每次提交代码之前首先修改样式即可。</p> <p>只需要在 <code>.husky/pre-commit</code> 文件中修改命令：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment"># 如果是全局安装 eslint，则可以直接使用 eslint 命令</span>
<span class="token function">yarn</span> eslint --fix ./src --ext .js,.jsx,.ts,.tsx,.vue
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>在每次预提交的时候，都会触发该方法进行检查并修复内容，同时如果出现错误，不会继续。</p> <p>但是这样会有一个问题，每次都会检查所有文件，这在开发中并不常用，因为通常代码不是我们一个人写的，同时项目可能包含远古代码，修改格式会导致未知错误。这时候就需要仅仅针对当前我们修改过的文件进行检查即可。</p> <h3 id="使用-lint-staged"><a href="#使用-lint-staged" class="header-anchor">#</a> 使用 lint-staged</h3> <p>想要做到上述要求，我们需要使用 <code>lint-staged</code> 工具帮助我们仅仅检查暂存区的内容。</p> <h4 id="安装-lint-staged"><a href="#安装-lint-staged" class="header-anchor">#</a> 安装 <code>lint-staged</code></h4> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">yarn</span> <span class="token function">add</span> lint-staged -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="配置-lint-staged"><a href="#配置-lint-staged" class="header-anchor">#</a> 配置 lint-staged</h4> <p>在 <code>package.json</code> 中增加配置内容：</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;lint-staged&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;*.{vue,js,ts,jsx,tsx}&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eslint --fix&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">提示</p> <p>有时候我们看到有些项目或者一些文章，在该字段中同时添加 <code>eslint --fix</code> 与 <code>git add</code>，也就是 <code>&quot;*.{vue,js,ts,jsx,tsx}&quot;: [&quot;eslint --fix&quot;, &quot;git add&quot;]</code>，这是 <code>lint-staged</code> v10 以下版本的写法，在 v10 及以上版本不再需要 <code>git add</code>。</p></div> <p>这表示检查并修复暂存区中所有的 <code>vue</code>、<code>js</code>、<code>ts</code>、<code>jsx</code>、<code>tsx</code> 文件。</p> <h4 id="修改-husky-的钩子内容"><a href="#修改-husky-的钩子内容" class="header-anchor">#</a> 修改 husky 的钩子内容</h4> <p>将之前在 <code>.husky/pre-commit</code> 中的指令修改为：<code>npx lint-staged</code>。</p> <p>这样就配置好了。当我们提交一个有错误的文件时，它会报错并拒绝提交：</p> <img src="/assets/roadmap/vue/template/husky_eslint_error.png" alt=""> <h2 id="解决样式配置后出现的问题"><a href="#解决样式配置后出现的问题" class="header-anchor">#</a> 解决样式配置后出现的问题</h2> <h3 id="解决-prettier-行尾换行符报错"><a href="#解决-prettier-行尾换行符报错" class="header-anchor">#</a> 解决 Prettier 行尾换行符报错</h3> <p>有时候当我们安装了 <code>Prettier</code> 之后，发现每一行的行尾都会报错，这是因为行尾换行符的冲突配置所致。此时我们需要在 <code>.eslintrc.js</code> 中的 <code>rules</code> 字段中添加一条规则：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>rules<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 解决 prettier 行尾报错</span>
    <span class="token string">&quot;prettier/prettier&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> endOfLine<span class="token operator">:</span> <span class="token string">&quot;auto&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>所有文件的结尾错误就可以解决。</p> <h3 id="解决-prettier-与-eslint-的冲突问题"><a href="#解决-prettier-与-eslint-的冲突问题" class="header-anchor">#</a> 解决 Prettier 与 ESLint 的冲突问题</h3> <p>这两个的规则有时存在冲突，一般情况下以 <code>Prettier</code> 为优先。</p> <p>安装插件：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">yarn</span> <span class="token function">add</span> eslint-plugin-prettier eslint-config-prettier -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>在 <code>.eslintrc.js</code> 中添加：</p> <div class="language-js line-numbers-mode"><div class="highlight-lines"><br><br><br><br><br><div class="highlighted"> </div><br><br></div><pre class="language-js"><code><span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token string">'plugin:vue/essential'</span><span class="token punctuation">,</span>
  <span class="token string">'airbnb-base'</span><span class="token punctuation">,</span>
  <span class="token string">&quot;airbnb-typescript/base&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;plugin:vue/vue3-recommended&quot;</span><span class="token punctuation">,</span>
  <span class="token string">'plugin:prettier/recommended'</span> <span class="token comment">// 添加解决冲突插件</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="解决通过-引入的路径问题"><a href="#解决通过-引入的路径问题" class="header-anchor">#</a> 解决通过 <code>@</code> 引入的路径问题</h3> <p>如果在使用了 <code>@</code> 字符的路径中出现该问题，则可以按如下方法解决。</p> <img src="/assets/roadmap/vue/template/import_no_unresolved.png" alt=""> <p>安装工具：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">yarn</span> <span class="token function">add</span> eslint-import-resolver-alias eslint-import-resolver-typescript -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>在 <code>tsconfig.json</code> 中添加：</p> <div class="language-json line-numbers-mode"><div class="highlight-lines"><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br></div><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;baseUrl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;.&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;types&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;vite/client&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;node&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;paths&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;@/*&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;./src/*&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>在 <code>.eslintrc.js</code> 中添加：</p> <div class="language-js line-numbers-mode"><div class="highlight-lines"><br><br><br><br><br><div class="highlighted"> </div><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br></div><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  parserOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
    ecmaVersion<span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span>
    parser<span class="token operator">:</span> <span class="token string">&quot;@typescript-eslint/parser&quot;</span><span class="token punctuation">,</span>
    sourceType<span class="token operator">:</span> <span class="token string">&quot;module&quot;</span><span class="token punctuation">,</span>
    project<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;./tsconfig.json&quot;</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  settings<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;import/parsers&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;@typescript-eslint/parser&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;.ts&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;.tsx&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;import/resolver&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      alias<span class="token operator">:</span> <span class="token punctuation">{</span>
        map<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&quot;@&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;./src&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        extensions<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;.js&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;.jsx&quot;</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      typescript<span class="token operator">:</span> <span class="token punctuation">{</span>
        alwaysTryTypes<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        project<span class="token operator">:</span> <span class="token string">&quot;./tsconfig.json&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h3 id="尝试保存文件时自动修复错误"><a href="#尝试保存文件时自动修复错误" class="header-anchor">#</a> 尝试保存文件时自动修复错误</h3> <p>在当前项目的根目录下创建文件夹 <code>.vscode</code>，在其中新建文件 <code>settings.json</code> 并键入：</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;editor.codeActionsOnSave&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;source.fixAll.eslint&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>如果需要在全局生效，则进入设置页面（<code>文件</code> -&gt; <code>首选项</code> -&gt; <code>设置</code>），搜索 <code>editor.codeActionsOnSave</code>，打开 <code>settings.json</code> 配置上述内容即可。</p> <h3 id="修复所有-vue-文件第一行首字符处出现-parsing-error-parseroptions-project-的错误"><a href="#修复所有-vue-文件第一行首字符处出现-parsing-error-parseroptions-project-的错误" class="header-anchor">#</a> 修复所有 vue 文件第一行首字符处出现 <code>Parsing error: &quot;parserOptions.project&quot;...</code> 的错误</h3> <img src="/assets/roadmap/vue/template/error_parseroptions_project.png" alt=""> <p>如遇到上面问题，配置 <code>.eslintrc.js</code> 中的 <code>extraFileExtensions</code> 字段即可：</p> <div class="language-js line-numbers-mode"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br><br></div><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  parserOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
    extraFileExtensions<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;.vue&quot;</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p>如果配置后未生效，重启编辑器即可。</p></blockquote> <h3 id="修复-defineprops-等未定义的错误"><a href="#修复-defineprops-等未定义的错误" class="header-anchor">#</a> 修复 defineProps 等未定义的错误</h3> <p>使用 <code>&lt;script setup&gt;</code> 标签时，常用的 <code>defineProps</code> 等属于全局宏定义，不需要二次引入，但是可能会导致规则报错，需要在 <code>.eslintrc.js</code> 中添加配置：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  globals<span class="token operator">:</span> <span class="token punctuation">{</span>
    defineProps<span class="token operator">:</span> <span class="token string">&quot;readonly&quot;</span><span class="token punctuation">,</span>
    defineEmits<span class="token operator">:</span> <span class="token string">&quot;readonly&quot;</span><span class="token punctuation">,</span>
    defineExpose<span class="token operator">:</span> <span class="token string">&quot;readonly&quot;</span><span class="token punctuation">,</span>
    withDefaults<span class="token operator">:</span> <span class="token string">&quot;readonly&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="修复-plugin-vite-eslint-的相关错误"><a href="#修复-plugin-vite-eslint-的相关错误" class="header-anchor">#</a> 修复 [plugin:vite:eslint] 的相关错误</h3> <p>有时候浏览器会报 <code>[plugin:vite:eslint]</code> 的相关错误，此时可以通过安装 <code>vite-plugin-eslint</code> 并配置来解决。</p> <ul><li>安装：</li></ul> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">yarn</span> <span class="token function">add</span> vite-plugin-eslint -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>配置</li></ul> <p>在 <code>vite.config.ts</code> 文件中配置：</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> eslintPlugin <span class="token keyword">from</span> <span class="token string">&quot;vite-plugin-eslint&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">eslintPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>如果你需要指定文件，可以添加参数：</p> <div class="language-ts line-numbers-mode"><div class="highlight-lines"><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br></div><pre class="language-ts"><code>plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token function">vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function">eslintPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    include<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;src/**/*.js&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;src/**/*.vue&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;src/**/*.ts&quot;</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>此时如果还报错，可以重启编译器和服务器尝试，通常会好。</p> <h2 id="添加提交规范"><a href="#添加提交规范" class="header-anchor">#</a> 添加提交规范</h2> <p><code>GIT</code> 的具体提交规范，可以参考 <a href="/document/git/#提交规范">提交规范</a>，这里只涉及规范工具的使用。</p> <h3 id="集成-commitizen"><a href="#集成-commitizen" class="header-anchor">#</a> 集成 Commitizen</h3> <p><a href="https://github.com/commitizen/cz-cli" target="_blank" rel="noopener noreferrer">Commitizen<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 是一个撰写规范提交信息的工具。</p> <p>我们可以全局安装该工具：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">npm</span> <span class="token function">install</span> -g commitizen
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">提示</p> <p><code>Commitizen</code> 最好是全局安装，否则不可以在全局使用 <code>git cz</code> 命令，而是需要在项目中使用 <code>yarn git-cz</code></p></div> <p>然后在项目中初始化：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>npx commitizen init cz-conventional-changelog --save-dev --save-exact
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>这样就可以通过命令行直接使用 <code>Commitizen</code> 了。以后但凡使用 <code>git commit</code> 命令，一律改为使用 <code>git cz</code> 即可，根据 cli 的提示一步步选择就可以生成符合规范的提交消息了。</p> <img src="/assets/roadmap/vue/template/cz_select_type.png" alt=""> <blockquote><p>注意：要先使用 <code>git add</code> 添加要提交的文件。</p></blockquote> <p>按照提示依次填写完成，就可以成功提交了。</p> <img src="/assets/roadmap/vue/template/cz_commit_finish.png" alt=""> <h3 id="自定义提交配置"><a href="#自定义提交配置" class="header-anchor">#</a> 自定义提交配置</h3> <p>因为提交的提示都是英文的，也没有配置内容，这时我们就需要 <code>cz-customizable</code> 来个性化。</p> <p>在项目中初始化它：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>npx commitizen init cz-customizable --save-dev --save-exact --force
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>注意上面的 <code>--force</code> 参数，因为之前已经初始化了 <code>cz-conventional-changelog</code>，我们在这里需要覆盖它。</p> <p>执行完成后，我们在根目录下创建一个 <code>.cz-config.js</code> 的文件，然后根据 <a href="https://github.com/leoforfree/cz-customizable/blob/master/cz-config-EXAMPLE.js" target="_blank" rel="noopener noreferrer">官方文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 进行配置即可。</p> <p>可以参考下面的中文示例进行配置：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 官方示例：https://github.com/leoforfree/cz-customizable/blob/master/cz-config-EXAMPLE.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  types<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token string">&quot;feat&quot;</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">&quot;feat:\t\t新增功能&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token string">&quot;fix&quot;</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">&quot;fix:\t\t修复 bug&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token string">&quot;docs&quot;</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">&quot;docs:\t\t文档变更&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      value<span class="token operator">:</span> <span class="token string">&quot;style&quot;</span><span class="token punctuation">,</span>
      name<span class="token operator">:</span> <span class="token string">&quot;style:\t代码格式（不影响功能，例如空格、分号等格式修正）&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      value<span class="token operator">:</span> <span class="token string">&quot;refactor&quot;</span><span class="token punctuation">,</span>
      name<span class="token operator">:</span> <span class="token string">&quot;refactor:\t代码重构（不包括 bug 修复、功能新增）&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token string">&quot;perf&quot;</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">&quot;perf:\t\t性能优化&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">&quot;test:\t\t添加、修改测试用例&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      value<span class="token operator">:</span> <span class="token string">&quot;build&quot;</span><span class="token punctuation">,</span>
      name<span class="token operator">:</span>
        <span class="token string">&quot;build:\t构建流程、外部依赖变更（如升级 npm 包、修改 webpack 配置等）&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token string">&quot;ci&quot;</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">&quot;ci:\t\t修改 CI 配置、脚本&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      value<span class="token operator">:</span> <span class="token string">&quot;chore&quot;</span><span class="token punctuation">,</span>
      name<span class="token operator">:</span> <span class="token string">&quot;chore:\t对构建过程或辅助工具和库的更改（不影响源文件、测试用例）&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token string">&quot;revert&quot;</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">&quot;revert:\t回滚 commit&quot;</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>

  scopes<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token string">&quot;components&quot;</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">&quot;components:\t组件相关&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token string">&quot;composables&quot;</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">&quot;composables:\tcomposables相关&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token string">&quot;utils&quot;</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">&quot;utils:\tutils相关&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token string">&quot;styles&quot;</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">&quot;styles:\t样式相关&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token string">&quot;dependencies&quot;</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">&quot;dependencies:\t依赖相关&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token string">&quot;other&quot;</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">&quot;other:\t其他&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 选中自定义可以自行填写，或者开启 allowCustomScopes 亦可</span>
    <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token string">&quot;custom&quot;</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">&quot;custom:\t自定义&quot;</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>

  <span class="token comment">// allowCustomScopes: true,</span>
  <span class="token comment">// allowTicketNumber: false,</span>
  <span class="token comment">// isTicketNumberRequired: false,</span>
  <span class="token comment">// ticketNumberPrefix: 'TICKET-',</span>
  <span class="token comment">// ticketNumberRegExp: '\\d{1,5}',</span>

  scopeOverrides<span class="token operator">:</span> <span class="token punctuation">{</span>
    fix<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;merge&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;style&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;e2eTest&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;unitTest&quot;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  messages<span class="token operator">:</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">&quot;确保本次提交遵循 Angular 规范！\n选择你要提交的类型：&quot;</span><span class="token punctuation">,</span>
    scope<span class="token operator">:</span> <span class="token string">&quot;\n选择一个 scope（可选）：&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// 选择 scope: custom 时会出下面的提示</span>
    customScope<span class="token operator">:</span> <span class="token string">&quot;请输入自定义的 scope：&quot;</span><span class="token punctuation">,</span>
    subject<span class="token operator">:</span> <span class="token string">&quot;填写本次提交的主题：\n&quot;</span><span class="token punctuation">,</span>
    body<span class="token operator">:</span> <span class="token string">'填写详细的变更描述（可选）。使用 &quot;|&quot; 换行：\n'</span><span class="token punctuation">,</span>
    breaking<span class="token operator">:</span> <span class="token string">&quot;是否存在非兼容性的变更。如果有，请填写：\n&quot;</span><span class="token punctuation">,</span>
    footer<span class="token operator">:</span> <span class="token string">&quot;请填写相应的 ISSUES（可选）。 例如: #1, #2：\n&quot;</span><span class="token punctuation">,</span>
    confirmCommit<span class="token operator">:</span> <span class="token string">&quot;确认提交？&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">// 设置只有 type 选择了 feat 或 fix，才询问 breaking message</span>
  allowBreakingChanges<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;feat&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;fix&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// askForBreakingChangeFirst : true,</span>

  <span class="token comment">// 跳过要询问的步骤</span>
  <span class="token comment">// skipQuestions: [&quot;body&quot;, &quot;footer&quot;],</span>

  <span class="token comment">// subject 限制长度</span>
  subjectLimit<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
  breaklineChar<span class="token operator">:</span> <span class="token string">&quot;|&quot;</span> <span class="token comment">// 支持 body 和 footer</span>
  <span class="token comment">// footerPrefix : 'ISSUES CLOSED:'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br></div></div><p>此时再运行 <code>git cz</code> 的时候，就可以看到中文了。</p> <img src="/assets/roadmap/vue/template/cz_select_type_cn.png" alt=""> <p>现在的提示，对于我这种英语学渣来说，就友好了很多~ 😄</p> <h3 id="集成-commitlint"><a href="#集成-commitlint" class="header-anchor">#</a> 集成 commitlint</h3> <p>尽管我们添加了 <code>Commitizen</code>，但是我们仍然可以通过 <code>git commit</code> 填写任意内容进行提交。为了保证规范，我们需要添加一个限制，就是 <code>如果没有按照规范填写提交信息，就不可以提交成功</code>，此时就需要通过 <code>commitlint</code> 来实现。</p> <h4 id="安装-commitlint"><a href="#安装-commitlint" class="header-anchor">#</a> 安装 commitlint</h4> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">yarn</span> <span class="token function">add</span> @commitlint/config-conventional @commitlint/cli -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="配置-commitlint"><a href="#配置-commitlint" class="header-anchor">#</a> 配置 commitlint</h4> <p>在根目录下创建一个名为 <code>commitlint.config.js</code> 的文件，并填写如下内容：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;@commitlint/config-conventional&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>配置好 <code>commitlint</code>，我们使用 <code>husky</code> 的钩子方法来验证提交信息。执行下面命令：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>npx husky <span class="token function">add</span> .husky/commit-msg <span class="token string">&quot;npx --no-install commitlint --edit <span class="token variable">$1</span>&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>如果没有安装 husky，请参考前面的内容 <a href="#%E5%AE%89%E8%A3%85-husky">安装 husky</a>。</p></blockquote> <p>我们现在再来试一下通过 <code>git commit</code> 命令随意填写提交信息：</p> <img src="/assets/roadmap/vue/template/husky_commitlint_error.png" alt=""> <p>可以看到已经不能正常提交了，同时给出错误的提示。</p> <p>当我们按照要求填写内容的时候，它就可以正常提交了：</p> <img src="/assets/roadmap/vue/template/husky_commitlint_ok.png" alt=""> <p>毕竟我们手写很可能出错，所以还是尽量选用 <code>git cz</code> 命令来按照提示选择最为稳妥。</p> <h3 id="集成-standard-version"><a href="#集成-standard-version" class="header-anchor">#</a> 集成 Standard-Version</h3> <p>生成 <code>CHANGELOG.md</code> 的方式有很多种，我们选择 <a href="https://github.com/conventional-changelog/standard-version" target="_blank" rel="noopener noreferrer">standard-version<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 来帮助我们实现。</p> <p>它是一个命令行工具，可以通过我们提交的内容，自动更新项目的版本，同时添加 <code>git tag</code> 和更新 <code>CHANGELOG.md</code>，很方便。</p> <p>我们的版本号分为 <code>major</code>、<code>minor</code>、<code>patch</code>，分别是<code>主版本</code>、<code>次版本</code>、<code>补丁版本</code>，它们分别对应项目的重构级别、新功能的增加、bug 的修复等。这在 <a href="https://semver.org/" target="_blank" rel="noopener noreferrer">语义化版本<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 中有详细的解释。</p> <h4 id="安装-standard-version"><a href="#安装-standard-version" class="header-anchor">#</a> 安装 Standard-Version</h4> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">npm</span> <span class="token function">install</span> -g standard-version  <span class="token comment"># 推荐全局安装</span>
<span class="token comment"># or</span>
<span class="token function">yarn</span> <span class="token function">add</span> standard-version -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="配置-standard-version"><a href="#配置-standard-version" class="header-anchor">#</a> 配置 Standard-Version</h4> <p>在 <code>package.json</code> 中添加如下脚本：</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;release&quot;</span><span class="token operator">:</span> <span class="token string">&quot;standard-version&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="使用-standard-version"><a href="#使用-standard-version" class="header-anchor">#</a> 使用 Standard-Version</h4> <h5 id="_1、自动生成版本号"><a href="#_1、自动生成版本号" class="header-anchor">#</a> 1、自动生成版本号</h5> <p>默认情况下，工具会根据规则自动生成版本号：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment"># 全局安装执行</span>
standard-version

<span class="token comment"># 脚本运行则执行</span>
<span class="token function">yarn</span> release
<span class="token comment"># or</span>
<span class="token function">npm</span> run release
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>如果提交的 <code>type</code> 是 <code>feat</code>，则 <code>minor</code> +1</li> <li>如果提交的 <code>type</code> 是 <code>fix</code>，则 <code>patch</code> +1</li></ul> <h5 id="_2、指定版本号"><a href="#_2、指定版本号" class="header-anchor">#</a> 2、指定版本号</h5> <p>我们可以通过参数，指定我们需要的版本号，但是这仍然需要遵循 <a href="https://semver.org/" target="_blank" rel="noopener noreferrer">语义化版本<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <p>假如当前版本号为 <code>v1.0.0</code>：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>standard-version -r major            <span class="token comment"># 2.0.0</span>
standard-version -r <span class="token number">2.0</span>.0-t          <span class="token comment"># 2.0.0-t</span>
standard-version -r minor            <span class="token comment"># 1.1.0</span>
standard-version -r <span class="token number">1.1</span>.0-t          <span class="token comment"># 1.1.0-t</span>
standard-version -r patch            <span class="token comment"># 1.0.1</span>
standard-version -r <span class="token number">1.0</span>.1-t          <span class="token comment"># 1.0.1-t</span>

<span class="token comment"># 脚本运行</span>
<span class="token function">yarn</span> release -- --release-as minor   <span class="token comment"># 1.1.0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><blockquote><ul><li><code>-r</code> 表示 <code>--release-as</code>，指定版本号</li></ul></blockquote> <h5 id="_3、预发布版本"><a href="#_3、预发布版本" class="header-anchor">#</a> 3、预发布版本</h5> <p>预发布版本用来发布预发版本，通常在版本号之后添加 <code>alpha</code> 或 <code>beta</code> 等字样。</p> <p>假如当前版本为 <code>v1.0.0</code>：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>standard-version --prerelease         <span class="token comment"># 1.0.1-0</span>
standard-version --prerelease alpha   <span class="token comment"># 1.0.1-alpha.0</span>

<span class="token comment"># 脚本运行</span>
<span class="token function">yarn</span> release -- -p beta               <span class="token comment"># 1.0.1-beta.0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h5 id="_4、添加-tag-前缀"><a href="#_4、添加-tag-前缀" class="header-anchor">#</a> 4、添加 tag 前缀</h5> <p>有时候我们需要为 <code>tag</code> 添加一些前缀内容，如 <code>@scope/package@2.0.0</code>，则需要：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>standard-version --tag-prefix @scope/package@  <span class="token comment"># @scope/package@2.0.1</span>

<span class="token comment"># 脚本运行</span>
<span class="token function">yarn</span> release -- -t @scope/package@             <span class="token comment"># @scope/package@2.0.1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="standard-version-的一些问题"><a href="#standard-version-的一些问题" class="header-anchor">#</a> Standard-Version 的一些问题</h4> <p>如果版本为 <code>0.x.x</code> 时，例如 <code>0.1.1</code>，当我们的提交中包含 <code>feat</code> 特性时，执行 <code>yarn release</code> 不会变成 <code>0.2.1</code>，而是 <code>0.1.2</code>，这是因为没有主版本号。</p> <p>这时需要手动给定版本号，或者修改主版本号后再执行。</p> <h2 id="添加单元测试"><a href="#添加单元测试" class="header-anchor">#</a> 添加单元测试</h2> <p>对于任何项目，尤其是大型项目，单元测试是一个非常重要的环节。完整的测试可以有效保证代码质量。</p> <h3 id="添加测试依赖"><a href="#添加测试依赖" class="header-anchor">#</a> 添加测试依赖</h3> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">yarn</span> <span class="token function">add</span> jest@26 ts-jest@26 @vue/test-utils@next vue-jest@next @types/jest eslint-plugin-jest -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">安装提示</p> <p>错误日期：2021.11.8</p> <p><code>jest</code> 和 <code>ts-jest</code> 由于版本冲突，最新如果直接安装，则为版本 27，此时运行测试内容会报错：</p> <img src="/assets/roadmap/vue/template/jest_version_error.png" alt=""> <p>需要指定版本 26，会解决该问题。</p> <p>详见 <a href="https://github.com/vuejs/vue-jest/issues/351" target="_blank" rel="noopener noreferrer">ISSUE #351<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <p>同时测试需要 <code>babel</code>，所以再安装 <code>babel</code> 依赖：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">yarn</span> <span class="token function">add</span> @babel/core @babel/preset-env @babel/preset-typescript @vue/babel-plugin-jsx -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">yarn</span> <span class="token function">add</span> babel-jest@26
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">安装提示</p> <p>错误日期：2021.11.8</p> <p>同样需要注意，<code>babel-jest</code> 由于版本问题，如果安装最新版 <code>^27</code>，会引起 <code>TypeError: babelJest.getCacheKey is not a function</code> 的错误，所以需要安装 <code>^26</code> 版本。</p> <p>详见 <a href="https://github.com/vuejs/vue-jest/issues/344" target="_blank" rel="noopener noreferrer">ISSUE 344<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <h3 id="配置-jest"><a href="#配置-jest" class="header-anchor">#</a> 配置 jest</h3> <ul><li>在根目录下添加 <code>jest.config.js</code> 文件，并键入如下内容：</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  clearMocks<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  coverageDirectory<span class="token operator">:</span> <span class="token string">&quot;coverage&quot;</span><span class="token punctuation">,</span>
  coverageProvider<span class="token operator">:</span> <span class="token string">&quot;v8&quot;</span><span class="token punctuation">,</span>
  moduleFileExtensions<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;vue&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;js&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;json&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;jsx&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ts&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;tsx&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;node&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  testMatch<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;**/tests/units/**/?(*.)+(unit|test|spec).[jt]s?(x)&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  testPathIgnorePatterns<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;/node_modules/&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  transform<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;^.+\\.jsx?$&quot;</span><span class="token operator">:</span> <span class="token string">&quot;babel-jest&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;^.+\\.vue?$&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vue-jest&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;^.+\\.tsx$&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ts-jest&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  moduleNameMapper<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 支持源代码中相同的 `@` -&gt; `src` 别名</span>
    <span class="token string">&quot;^@/(.*)$&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;rootDir&gt;/src/$1&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  preset<span class="token operator">:</span> <span class="token string">&quot;ts-jest&quot;</span><span class="token punctuation">,</span>
  testEnvironment<span class="token operator">:</span> <span class="token string">&quot;jsdom&quot;</span><span class="token punctuation">,</span>
  collectCoverage<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  collectCoverageFrom<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;src/**/*.{js,jsx,ts,tsx,vue}&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;!**/node_modules/**&quot;</span><span class="token punctuation">]</span>
  <span class="token comment">// coverageReporters: [&quot;text&quot;, &quot;text-summary&quot;, &quot;html&quot;],</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><ul><li>在根目录下添加 <code>babel.config.js</code> 文件，并键入：</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  presets<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token string">&quot;@babel/preset-env&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> targets<span class="token operator">:</span> <span class="token punctuation">{</span> node<span class="token operator">:</span> <span class="token string">&quot;current&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">&quot;@babel/preset-typescript&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;@vue/babel-plugin-jsx&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>在 <code>tsconfig.json</code> 中添加：</li></ul> <div class="language-json line-numbers-mode"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br></div><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;types&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;vite/client&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;node&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;jest&quot;</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;include&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;src/**/*.ts&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;src/**/*.d.ts&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;src/**/*.tsx&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;src/**/*.vue&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;tests/**/*.ts&quot;</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>在 <code>.eslintrc.js</code> 中添加：</p> <div class="language-js line-numbers-mode"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">'plugin:vue/essential'</span><span class="token punctuation">,</span>
    <span class="token string">'plugin:jest/recommended'</span><span class="token punctuation">,</span>
    <span class="token string">'airbnb-base'</span><span class="token punctuation">,</span>
    <span class="token string">'airbnb-typescript/base'</span><span class="token punctuation">,</span>
    <span class="token string">'plugin:vue/vue3-recommended'</span><span class="token punctuation">,</span>
    <span class="token string">'plugin:prettier/recommended'</span> <span class="token comment">// 添加 prettier 插件</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="执行测试"><a href="#执行测试" class="header-anchor">#</a> 执行测试</h3> <p>在 <code>package.json</code> 中添加脚本：</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;jest&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>执行 <code>yarn test</code>，会根据 <code>jest.config.js</code> 的配置内容进行测试：</p> <img src="/assets/roadmap/vue/template/jest_result.png" alt=""> <h3 id="将测试集成到-husky-中"><a href="#将测试集成到-husky-中" class="header-anchor">#</a> 将测试集成到 husky 中</h3> <p>默认情况下，<code>husky</code> 提供的代码是每次提交都进行测试，这样对于开发来说比较麻烦，我们之前也删除了对应的代码。我们希望在 <code>push</code> 的时候测试代码，这样可以减少测试数量，同时也保证了代码的有效性。</p> <p>使用 <code>pre-push</code> 钩子就可以实现。</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>npx husky <span class="token function">add</span> .husky/pre-push <span class="token string">&quot;yarn test <span class="token variable">$1</span>&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>该命令会在 <code>.husky</code> 文件夹下创建一个 <code>pre-push</code> 的钩子文件。</p> <p>现在，每次我们提交的时候都会执行测试，只有当测试通过才会进行 <code>push</code> 操作。</p> <h2 id="测试常见问题"><a href="#测试常见问题" class="header-anchor">#</a> 测试常见问题</h2> <h3 id="配置全局-key-之后的-vuex-如何测试"><a href="#配置全局-key-之后的-vuex-如何测试" class="header-anchor">#</a> 配置全局 key 之后的 vuex 如何测试</h3> <p>在测试中，可以发现，当页面中调用了之前我们配置的 <code>./useStore()</code> 之后，会报找不到 <code>key</code> 的错误：</p> <img src="/assets/roadmap/vue/template/test_vuex_key_error.png" alt=""> <p>此时我们需要对 <code>store</code> 进行一个全局注入，将 <code>key</code> 一并注入到测试组件中。</p> <div class="language-js line-numbers-mode"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> shallowMount <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vue/test-utils&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> WelcomeComponent <span class="token keyword">from</span> <span class="token string">&quot;@/components/HelloWorld.vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> store<span class="token punctuation">,</span> <span class="token punctuation">{</span> key <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@/store/index&quot;</span><span class="token punctuation">;</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&quot;Welcome Component Test&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> wrapper <span class="token operator">=</span> <span class="token function">shallowMount</span><span class="token punctuation">(</span>WelcomeComponent<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    props<span class="token operator">:</span> <span class="token punctuation">{</span> msg<span class="token operator">:</span> <span class="token string">&quot;Hello Test!&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>

    global<span class="token operator">:</span> <span class="token punctuation">{</span>
      plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>store<span class="token punctuation">,</span> key<span class="token punctuation">]</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&quot;load compoent&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> html <span class="token operator">=</span> wrapper<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toContain</span><span class="token punctuation">(</span><span class="token string">&quot;Hello Test!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>需要注意的是，<code>JS</code> 中 <code>Symbol</code> 是唯一的，所以需要从 <code>store</code> 中导出。但是我们定义的 <code>key</code> 是 <code>InjectionKey</code> 类型，不能用作键，故不能使用：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>global<span class="token operator">:</span> <span class="token punctuation">{</span>
  provide<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token operator">:</span> store
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>的方式，所以我们选择通过 <code>plugins</code> 的方式添加。更多参见 <a href="https://next.vue-test-utils.vuejs.org/guide/advanced/vuex.html#testing-components-that-utilize-usestore-with-an-injection-key" target="_blank" rel="noopener noreferrer">文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <hr class="footnotes-sep"> <section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>使用时注意使用一个即可。请添加后自行删除 <code>package.json</code> 中 <code>devDependencies</code> 字段中的多余内容即可。 <a href="#fnref1" class="footnote-backref">↩︎</a></p></li></ol></section></div> <!----> <div class="content__content-bottom"></div> <footer class="page-meta"><div class="edit-link"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon edit-icon"><path d="M117.953 696.992 64.306 959.696l265.931-49.336 450.204-452.505-212.284-213.376-450.204 452.513zm496.384-296.326L219.039 797.993l-46.108-46.34L568.233 354.33l46.104 46.335zm345.357-122.99-114.45 115.04-212.288-213.377 114.45-115.035 212.288 213.371zm0 0" fill="currentColor"></path></svg> <a href="https://github.com/jeremyjone/docs/edit/main/docs/roadmap/frontend/vue/template/setup-from-0.md" target="_blank" rel="noopener noreferrer">编辑此页</a></div> <div class="meta-item update-time"><span class="label">上次编辑于:</span> <span class="info">2022年6月8日 09:43</span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/roadmap/frontend/vue/template/" class="prev router-link-active"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon prev-icon"><path d="M906.783 588.79c-.02 8.499-6.882 15.36-15.38 15.37l-443.7-.01 75.704 191.682c2.52 6.42.482 13.763-5.038 17.91-5.52 4.168-13.138 4.147-18.616-.092L123.228 524.175a15.362 15.362 0 0 1-6-12.165c0-4.782 2.222-9.277 6-12.185L499.753 210.35a15.388 15.388 0 0 1 9.38-3.195c3.236 0 6.502 1.034 9.236 3.103 5.52 4.147 7.578 11.49 5.038 17.91L447.683 419.84l443.72-.01c8.498.01 15.36 6.881 15.36 15.36l.02 153.6z" fill="currentColor"></path></svg>
        使用项目模板
      </a></span> <span class="next"><a href="/roadmap/frontend/react/">
        React 学习之路
        <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon next-icon"><path d="M906.772 512c0 4.772-2.211 9.267-5.99 12.175L524.257 813.66a15.37 15.37 0 0 1-18.616.092 15.368 15.368 0 0 1-5.038-17.91l75.714-191.672h-443.73c-8.488 0-15.36-6.881-15.36-15.36v-153.6c0-8.489 6.872-15.36 15.36-15.36h443.73l-75.714-191.682a15.358 15.358 0 0 1 5.048-17.91c5.51-4.158 13.128-4.137 18.606.092l376.525 289.485a15.323 15.323 0 0 1 5.99 12.165z" fill="currentColor"></path></svg></a></span></p></div> <div class="comments-wrapper"><div class="valine-wrapper"><div id="valine"></div></div></div> <!----> <div class="content__page-bottom"></div></main> <footer class="footer-wrapper"><!----> <div class="footer"><a href='https://beian.miit.gov.cn/' target='_blank'>京ICP备19012859号-1</a></div> <div class="copyright">MIT Licensed | Copyright © 2020-present <a href="https://www.jeremyjone.com" target="_blank">JeremyJone</a></div></footer></div><div class="global-ui"><!----><!----><div id="pwa-install"><!----> <div id="install-modal-wrapper" style="display:none;"><div class="background"></div> <div class="install-modal"><div class="header"><button aria-label="关闭" class="close-button"><svg width="23" height="22" xmlns="http://www.w3.org/2000/svg" class="icon close-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.12.358a1.224 1.224 0 011.729 0l8.92 8.914L20.686.358a1.224 1.224 0 011.73 1.728L13.497 11l8.92 8.913a1.222 1.222 0 11-1.73 1.729l-8.919-8.913-8.92 8.913a1.224 1.224 0 01-1.729-1.729L10.04 11l-8.92-8.914a1.222 1.222 0 010-1.728z" fill="currentColor"></path></svg></button> <div class="logo"><!----> <div class="title"><h1></h1> <p class="desc">该应用可以安装在您的 PC 或移动设备上。这将使该 Web 应用程序外观和行为与其他应用程序相同。它将在出现在应用程序列表中，并可以固定到主屏幕，开始菜单或任务栏。此 Web 应用程序还将能够与其他应用程序和您的操作系统安全地进行交互。</p></div></div></div> <div class="content"><div class="highlight"><!----> <!----></div> <div class="description"><h3>详情</h3> <p></p></div></div> <div class="button-wrapper"><button class="install-button">
        安装 <span></span></button> <button class="cancel-button">
        取消
      </button></div></div></div></div><div tabindex="-1" role="dialog" aria-hidden="true" class="pswp"><div class="pswp__bg"></div> <div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div> <div class="pswp__item"></div> <div class="pswp__item"></div></div> <div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div> <button class="pswp__button pswp__button--close"></button> <button class="pswp__button pswp__button--share"></button> <button class="pswp__button pswp__button--fs"></button> <button class="pswp__button pswp__button--zoom"></button> <div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div> <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div> <button class="pswp__button pswp__button--arrow--left"></button> <button class="pswp__button pswp__button--arrow--right"></button> <div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div></div></div>
    <script src="/assets/js/app.1830d723.js" defer></script><script src="/assets/js/vendors~layout-Layout.e6b81aaa.js" defer></script><script src="/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.99fc0ed6.js" defer></script><script src="/assets/js/page-从0搭建项目模板（vue3）.b4dbcf15.js" defer></script><script src="/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound~layout-Slide.69314708.js" defer></script>
  </body>
</html>
