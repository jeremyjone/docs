<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Swagger 文档的使用 | JeremyJone 的文档站</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/docs/assets/img/logo.png">
    <script src="https://cdn.jsdelivr.net/npm/darkreader@4.9.32/darkreader.min.js"></script>
    <script src="/docs/js/base.js"></script>
    <meta name="description" content="jeremyjone document web">
    <link rel="preload" href="/docs/assets/css/0.styles.91f5cac8.css" as="style"><link rel="preload" href="/docs/assets/js/app.d103760d.js" as="script"><link rel="preload" href="/docs/assets/js/2.525f04cb.js" as="script"><link rel="preload" href="/docs/assets/js/63.3324d7d2.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.63d08d11.js"><link rel="prefetch" href="/docs/assets/js/11.a9e44199.js"><link rel="prefetch" href="/docs/assets/js/12.e2ffbea5.js"><link rel="prefetch" href="/docs/assets/js/13.2347c521.js"><link rel="prefetch" href="/docs/assets/js/14.fb883a30.js"><link rel="prefetch" href="/docs/assets/js/15.61ec69bd.js"><link rel="prefetch" href="/docs/assets/js/16.9087c33a.js"><link rel="prefetch" href="/docs/assets/js/17.615bc03d.js"><link rel="prefetch" href="/docs/assets/js/18.454f7a79.js"><link rel="prefetch" href="/docs/assets/js/19.05c441a2.js"><link rel="prefetch" href="/docs/assets/js/20.edd03ac4.js"><link rel="prefetch" href="/docs/assets/js/21.8e689f18.js"><link rel="prefetch" href="/docs/assets/js/22.4df72eeb.js"><link rel="prefetch" href="/docs/assets/js/23.7187f063.js"><link rel="prefetch" href="/docs/assets/js/24.4783ab2e.js"><link rel="prefetch" href="/docs/assets/js/25.149bfde7.js"><link rel="prefetch" href="/docs/assets/js/26.1ac77c75.js"><link rel="prefetch" href="/docs/assets/js/27.e10f554c.js"><link rel="prefetch" href="/docs/assets/js/28.99f1f299.js"><link rel="prefetch" href="/docs/assets/js/29.0ba50be2.js"><link rel="prefetch" href="/docs/assets/js/3.d8871e3b.js"><link rel="prefetch" href="/docs/assets/js/30.8c28a8d5.js"><link rel="prefetch" href="/docs/assets/js/31.a417ee06.js"><link rel="prefetch" href="/docs/assets/js/32.4cc4b3fd.js"><link rel="prefetch" href="/docs/assets/js/33.e944eb0b.js"><link rel="prefetch" href="/docs/assets/js/34.9b668cdb.js"><link rel="prefetch" href="/docs/assets/js/35.09a372c7.js"><link rel="prefetch" href="/docs/assets/js/36.1b087c25.js"><link rel="prefetch" href="/docs/assets/js/37.afd0f8f5.js"><link rel="prefetch" href="/docs/assets/js/38.1d67a4e3.js"><link rel="prefetch" href="/docs/assets/js/39.1f25ec48.js"><link rel="prefetch" href="/docs/assets/js/4.a50b8c29.js"><link rel="prefetch" href="/docs/assets/js/40.08c67710.js"><link rel="prefetch" href="/docs/assets/js/41.b9995785.js"><link rel="prefetch" href="/docs/assets/js/42.d917691d.js"><link rel="prefetch" href="/docs/assets/js/43.7b292ce3.js"><link rel="prefetch" href="/docs/assets/js/44.e9bc79af.js"><link rel="prefetch" href="/docs/assets/js/45.ed71ec46.js"><link rel="prefetch" href="/docs/assets/js/46.44b46aa0.js"><link rel="prefetch" href="/docs/assets/js/47.5b352f2e.js"><link rel="prefetch" href="/docs/assets/js/48.99b8cf0e.js"><link rel="prefetch" href="/docs/assets/js/49.028a4e2f.js"><link rel="prefetch" href="/docs/assets/js/5.3c2a8087.js"><link rel="prefetch" href="/docs/assets/js/50.768eab47.js"><link rel="prefetch" href="/docs/assets/js/51.7c4fc81d.js"><link rel="prefetch" href="/docs/assets/js/52.63f08128.js"><link rel="prefetch" href="/docs/assets/js/53.6a89bc0c.js"><link rel="prefetch" href="/docs/assets/js/54.473edcce.js"><link rel="prefetch" href="/docs/assets/js/55.20dfb19c.js"><link rel="prefetch" href="/docs/assets/js/56.2910da07.js"><link rel="prefetch" href="/docs/assets/js/57.4f9984e8.js"><link rel="prefetch" href="/docs/assets/js/58.01a6cf7e.js"><link rel="prefetch" href="/docs/assets/js/59.b929308b.js"><link rel="prefetch" href="/docs/assets/js/6.e244f7f5.js"><link rel="prefetch" href="/docs/assets/js/60.058d28c9.js"><link rel="prefetch" href="/docs/assets/js/61.83338d1f.js"><link rel="prefetch" href="/docs/assets/js/62.3f3b6821.js"><link rel="prefetch" href="/docs/assets/js/64.f59c760d.js"><link rel="prefetch" href="/docs/assets/js/65.5df1b58e.js"><link rel="prefetch" href="/docs/assets/js/66.16bf889e.js"><link rel="prefetch" href="/docs/assets/js/67.72992505.js"><link rel="prefetch" href="/docs/assets/js/68.8929e93a.js"><link rel="prefetch" href="/docs/assets/js/69.942f98fa.js"><link rel="prefetch" href="/docs/assets/js/7.edded807.js"><link rel="prefetch" href="/docs/assets/js/70.c7120546.js"><link rel="prefetch" href="/docs/assets/js/71.391618cd.js"><link rel="prefetch" href="/docs/assets/js/72.f9d050bf.js"><link rel="prefetch" href="/docs/assets/js/73.2b83d952.js"><link rel="prefetch" href="/docs/assets/js/74.76e2e9c8.js"><link rel="prefetch" href="/docs/assets/js/75.3b498fe6.js"><link rel="prefetch" href="/docs/assets/js/76.d23cd9f1.js"><link rel="prefetch" href="/docs/assets/js/8.72c1ac79.js"><link rel="prefetch" href="/docs/assets/js/9.c703ec4d.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.91f5cac8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><img src="/docs/assets/img/logo.png" alt="JeremyJone 的文档站" class="logo"> <span class="site-name can-hide">JeremyJone 的文档站</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="代码相关菜单" class="dropdown-title"><span class="title">代码相关</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/standard/" class="nav-link">
  代码编写规范
</a></li><li class="dropdown-item"><!----> <a href="/docs/codes/" class="nav-link">
  代码库
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="文档手册菜单" class="dropdown-title"><span class="title">文档手册</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          使用文档
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/document/git/" class="nav-link">
  Git 使用文档
</a></li><li class="dropdown-subitem"><a href="/docs/document/markdown/" class="nav-link">
  Markdown 使用文档
</a></li><li class="dropdown-subitem"><a href="/docs/document/vim/" class="nav-link">
  Vim 使用文档
</a></li><li class="dropdown-subitem"><a href="/docs/document/docker/" class="nav-link">
  Docker 使用文档
</a></li></ul></li><li class="dropdown-item"><h4>
          学习手册
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/roadmap/dotnetcore/" class="nav-link router-link-active">
  .NET 学习之路
</a></li><li class="dropdown-subitem"><a href="/docs/roadmap/java/" class="nav-link">
  Java 学习之路
</a></li><li class="dropdown-subitem"><a href="/docs/roadmap/vue/" class="nav-link">
  Vue 学习之路
</a></li><li class="dropdown-subitem"><a href="/docs/roadmap/react/" class="nav-link">
  React 学习之路
</a></li><li class="dropdown-subitem"><a href="/docs/roadmap/flutter/" class="nav-link">
  Flutter 学习之路
</a></li><li class="dropdown-subitem"><a href="/docs/roadmap/android/" class="nav-link">
  Android 学习之路
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://www.jeremyjone.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  我的博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://www.xiaopangying.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  个人站
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/jeremyjone/docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="代码相关菜单" class="dropdown-title"><span class="title">代码相关</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/standard/" class="nav-link">
  代码编写规范
</a></li><li class="dropdown-item"><!----> <a href="/docs/codes/" class="nav-link">
  代码库
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="文档手册菜单" class="dropdown-title"><span class="title">文档手册</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          使用文档
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/document/git/" class="nav-link">
  Git 使用文档
</a></li><li class="dropdown-subitem"><a href="/docs/document/markdown/" class="nav-link">
  Markdown 使用文档
</a></li><li class="dropdown-subitem"><a href="/docs/document/vim/" class="nav-link">
  Vim 使用文档
</a></li><li class="dropdown-subitem"><a href="/docs/document/docker/" class="nav-link">
  Docker 使用文档
</a></li></ul></li><li class="dropdown-item"><h4>
          学习手册
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/roadmap/dotnetcore/" class="nav-link router-link-active">
  .NET 学习之路
</a></li><li class="dropdown-subitem"><a href="/docs/roadmap/java/" class="nav-link">
  Java 学习之路
</a></li><li class="dropdown-subitem"><a href="/docs/roadmap/vue/" class="nav-link">
  Vue 学习之路
</a></li><li class="dropdown-subitem"><a href="/docs/roadmap/react/" class="nav-link">
  React 学习之路
</a></li><li class="dropdown-subitem"><a href="/docs/roadmap/flutter/" class="nav-link">
  Flutter 学习之路
</a></li><li class="dropdown-subitem"><a href="/docs/roadmap/android/" class="nav-link">
  Android 学习之路
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://www.jeremyjone.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  我的博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://www.xiaopangying.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  个人站
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/jeremyjone/docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>.NET 学习之路</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/roadmap/dotnetcore/" aria-current="page" class="sidebar-link">ASP.NET Core 开发者学习路线图</a></li><li><a href="/docs/roadmap/dotnetcore/basic.html" class="sidebar-link">基础知识</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>依赖注入</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>数据库</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>对象映射</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>认证与授权</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>缓存</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>日志</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>Swagger 文档</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/roadmap/dotnetcore/swagger/" aria-current="page" class="active sidebar-link">Swagger 文档的使用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/roadmap/dotnetcore/swagger/#安装" class="sidebar-link">安装</a></li><li class="sidebar-sub-header"><a href="/docs/roadmap/dotnetcore/swagger/#基础实现" class="sidebar-link">基础实现</a></li><li class="sidebar-sub-header"><a href="/docs/roadmap/dotnetcore/swagger/#配置路由" class="sidebar-link">配置路由</a></li><li class="sidebar-sub-header"><a href="/docs/roadmap/dotnetcore/swagger/#变更端点" class="sidebar-link">变更端点</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/roadmap/dotnetcore/swagger/#修改路由前缀" class="sidebar-link">修改路由前缀</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/roadmap/dotnetcore/swagger/#生成多文档" class="sidebar-link">生成多文档</a></li><li class="sidebar-sub-header"><a href="/docs/roadmap/dotnetcore/swagger/#配置文档内容" class="sidebar-link">配置文档内容</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/roadmap/dotnetcore/swagger/#文档全局信息" class="sidebar-link">文档全局信息</a></li><li class="sidebar-sub-header"><a href="/docs/roadmap/dotnetcore/swagger/#接口内容" class="sidebar-link">接口内容</a></li><li class="sidebar-sub-header"><a href="/docs/roadmap/dotnetcore/swagger/#使用-xml-文档" class="sidebar-link">使用 xml 文档</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/roadmap/dotnetcore/swagger/#配置认证" class="sidebar-link">配置认证</a></li><li class="sidebar-sub-header"><a href="/docs/roadmap/dotnetcore/swagger/#更多" class="sidebar-link">更多</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>微服务</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="swagger-文档的使用"><a href="#swagger-文档的使用" class="header-anchor">#</a> Swagger 文档的使用</h1> <p>相信能看到这里，你一定对 swagger 多少有了解。它是极具推崇的文档生成工具，在多种语言下都可以有良好的体验。有兴趣的朋友可以去看看 <a href="https://swagger.io/docs/" target="_blank" rel="noopener noreferrer">官方文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <h2 id="安装"><a href="#安装" class="header-anchor">#</a> 安装</h2> <p>在 <code>ASP.NET Core</code> 中，直接安装 <code>Swashbuckle.AspNetCore</code> 即可。它包含了 <code>SwaggerGen</code> 以及 <code>SwaggerUI</code>。</p> <p>通过命令：<code>PM:Install-Package Swashbuckle.AspNetCore</code> 或者在 <code>包管理器</code> 中安装。</p> <h2 id="基础实现"><a href="#基础实现" class="header-anchor">#</a> 基础实现</h2> <p>创建一个 Web Api 项目，然后在 <code>Startup.cs</code> 中稍微配置一下：</p> <div class="custom-block tip"><p class="custom-block-title">示例代码</p> <p>具体代码可以看 <a href="https://github.com/jeremyjone/dotnet-study-road/tree/master/Swagger/WebApplication1" target="_blank" rel="noopener noreferrer">示例代码<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <div class="language-csharp line-numbers-mode"><div class="highlight-lines"><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br></div><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ConfigureServices</span><span class="token punctuation">(</span><span class="token class-name">IServiceCollection</span> services<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    services<span class="token punctuation">.</span><span class="token function">AddSwaggerGen</span><span class="token punctuation">(</span>c <span class="token operator">=&gt;</span>
    <span class="token punctuation">{</span>
        c<span class="token punctuation">.</span><span class="token function">SwaggerDoc</span><span class="token punctuation">(</span><span class="token string">&quot;v1&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">OpenApiInfo</span> <span class="token punctuation">{</span> Title <span class="token operator">=</span> <span class="token string">&quot;WebApplication1&quot;</span><span class="token punctuation">,</span> Version <span class="token operator">=</span> <span class="token string">&quot;v1&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IApplicationBuilder</span> app<span class="token punctuation">,</span> <span class="token class-name">IWebHostEnvironment</span> env<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>env<span class="token punctuation">.</span><span class="token function">IsDevelopment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        app<span class="token punctuation">.</span><span class="token function">UseSwagger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        app<span class="token punctuation">.</span><span class="token function">UseSwaggerUI</span><span class="token punctuation">(</span>c <span class="token operator">=&gt;</span> c<span class="token punctuation">.</span><span class="token function">SwaggerEndpoint</span><span class="token punctuation">(</span><span class="token string">&quot;/swagger/v1/swagger.json&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;WebApplication1 v1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 指定 json 端点，可省略</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>接着，在 Controller 中的控制器类上面添加一个 <code>[Route(&quot;[controller]&quot;)]</code> 属性，并且在方法上添加 <code>[HttpGet]</code> 属性：</p> <div class="language-csharp line-numbers-mode"><div class="highlight-lines"><div class="highlighted"> </div><br><br><div class="highlighted"> </div><br><br><br><br><br><br></div><pre class="language-csharp"><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Route</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;[controller]&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WeatherForecastController</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ControllerBase</span></span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpGet</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">IEnumerable<span class="token punctuation">&lt;</span>WeatherForecast<span class="token punctuation">&gt;</span></span> <span class="token function">Get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>然后打开浏览器，在根路径后面加上 <code>swagger</code> 即可看到文档显示成功。</p> <img src="/docs/assets/roadmap/dotnet/swagger/base_show.png" alt=""> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>在 <code>.NET 5</code> 中，创建一个 Web Api 项目之后，以上内容已经全部添加，还是很友好的。</p></div> <h2 id="配置路由"><a href="#配置路由" class="header-anchor">#</a> 配置路由</h2> <p>看到了成功的效果，现在来反推一下过程。</p> <p>之所以文档会显示该接口，是因为我们配置了控制器的路由。如果我们删掉控制器中的配置，则在文档中就不会生成任何接口信息。</p> <p>所有的控制器和方法都需要提供对应的路由和谓词属性。同时，路由不能重复，相同的方法可以有不同的谓词属性。</p> <p>为了更好的测试，我们复制 <code>Get</code> 并起一个新的名字 <code>MyFunc</code>，同时给出 <code>[HttpGet]</code> 属性，它的路由默认为空。</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpGet</span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name">IEnumerable<span class="token punctuation">&lt;</span>WeatherForecast<span class="token punctuation">&gt;</span></span> <span class="token function">MyFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>执行程序，会看到报错：</p> <img src="/docs/assets/roadmap/dotnet/swagger/error1.png" alt=""> <p>同时在输入栏中可以看到异常信息：</p> <div class="language-txt line-numbers-mode"><pre class="language-txt"><code>Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Conflicting method/path combination &quot;GET WeatherForecast&quot; for actions - WebApplication1.Controllers.WeatherForecastController.Get (WebApplication1),WebApplication1.Controllers.WeatherForecastController.MyFunc (WebApplication1). Actions require a unique method/path combination for Swagger/OpenAPI 3.0. Use ConflictingActionsResolver as a workaround
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>很明显，方法冲突了。这就说明它在生成的时候将两个方法同时生成了路由为 <code>&lt;URL&gt;/WeatherForecast/</code>。该种情况的解决方法有两种，一种是单独写方法路由：</p> <div class="language-csharp line-numbers-mode"><div class="highlight-lines"><div class="highlighted"> </div><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><br></div><pre class="language-csharp"><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpGet</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;index&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name">IEnumerable<span class="token punctuation">&lt;</span>WeatherForecast<span class="token punctuation">&gt;</span></span> <span class="token function">Get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token comment">// or</span>
<span class="token punctuation">[</span>HttpGet<span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Route</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;index&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name">IEnumerable<span class="token punctuation">&lt;</span>WeatherForecast<span class="token punctuation">&gt;</span></span> <span class="token function">Get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>另外一种则是直接在控制器中写好方法路由：</p> <div class="language-csharp line-numbers-mode"><div class="highlight-lines"><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br></div><pre class="language-csharp"><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Route</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;[controller]/[action]&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WeatherForecastController</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ControllerBase</span></span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpGet</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">IEnumerable<span class="token punctuation">&lt;</span>WeatherForecast<span class="token punctuation">&gt;</span></span> <span class="token function">Get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>后者在编写时会很方便，但是后期维护效果并不好，所以推荐相对灵活的单独编写方式。</p> <div class="custom-block tip"><p class="custom-block-title">推荐阅读</p> <p>关于更多的路由内容，可以参考 <a href="https://docs.microsoft.com/zh-cn/aspnet/core/mvc/controllers/routing" target="_blank" rel="noopener noreferrer">官方文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 深入理解。</p></div> <h2 id="变更端点"><a href="#变更端点" class="header-anchor">#</a> 变更端点</h2> <p>默认情况下，swagger 文档的路由是 <code>/swagger/{documentName}/swagger.json</code>，如果需要替换，可以通过路由模板设置，需要注意，自定义的路由需要包含 <code>{documentName}</code> 参数：</p> <div class="language-csharp line-numbers-mode"><div class="highlight-lines"><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><div class="highlighted"> </div><br><br><br></div><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IApplicationBuilder</span> app<span class="token punctuation">,</span> <span class="token class-name">IWebHostEnvironment</span> env<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>env<span class="token punctuation">.</span><span class="token function">IsDevelopment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        app<span class="token punctuation">.</span><span class="token function">UseSwagger</span><span class="token punctuation">(</span>c <span class="token operator">=&gt;</span>
        <span class="token punctuation">{</span>
            c<span class="token punctuation">.</span>RouteTemplate <span class="token operator">=</span> <span class="token string">&quot;api-docs/{documentName}/swagger.json&quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 修改了文档路由，需要同时更新 UI 的端点</span>
        app<span class="token punctuation">.</span><span class="token function">UseSwaggerUI</span><span class="token punctuation">(</span>c <span class="token operator">=&gt;</span> c<span class="token punctuation">.</span><span class="token function">SwaggerEndpoint</span><span class="token punctuation">(</span><span class="token string">&quot;/api-docs/v1/swagger.json&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;WebApplication1 v1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="修改路由前缀"><a href="#修改路由前缀" class="header-anchor">#</a> 修改路由前缀</h3> <p>默认的路有前缀是 <code>swagger</code>，如果需要修改，可以通过修改 <code>RoutePrefix</code> 的方式：</p> <div class="language-csharp line-numbers-mode"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br><br></div><pre class="language-csharp"><code>app<span class="token punctuation">.</span><span class="token function">UseSwaggerUI</span><span class="token punctuation">(</span>c <span class="token operator">=&gt;</span>
<span class="token punctuation">{</span>
    c<span class="token punctuation">.</span>RoutePrefix <span class="token operator">=</span> <span class="token string">&quot;swagger&quot;</span><span class="token punctuation">;</span>
    c<span class="token punctuation">.</span><span class="token function">SwaggerEndpoint</span><span class="token punctuation">(</span><span class="token string">&quot;v1/swagger.json&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;My API V1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="生成多文档"><a href="#生成多文档" class="header-anchor">#</a> 生成多文档</h2> <p>有时候需要将文档分类为多个文档，比如多个版本，这时只需要将上面的配置多配置几个即可。</p> <p>第一步，在 <code>Startup.cs</code> 中配置好名称，比如 <code>v2</code>，该名称需要与路径和配置对应。</p> <div class="language-csharp line-numbers-mode"><div class="highlight-lines"><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br></div><pre class="language-csharp"><code><span class="token comment">// Startup.cs</span>
<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ConfigureServices</span><span class="token punctuation">(</span><span class="token class-name">IServiceCollection</span> services<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    services<span class="token punctuation">.</span><span class="token function">AddSwaggerGen</span><span class="token punctuation">(</span>c <span class="token operator">=&gt;</span>
    <span class="token punctuation">{</span>
        c<span class="token punctuation">.</span><span class="token function">SwaggerDoc</span><span class="token punctuation">(</span><span class="token string">&quot;v1&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">OpenApiInfo</span> <span class="token punctuation">{</span> Title <span class="token operator">=</span> <span class="token string">&quot;WebApplication1&quot;</span><span class="token punctuation">,</span> Version <span class="token operator">=</span> <span class="token string">&quot;v1&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        c<span class="token punctuation">.</span><span class="token function">SwaggerDoc</span><span class="token punctuation">(</span><span class="token string">&quot;v2&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">OpenApiInfo</span> <span class="token punctuation">{</span> Title <span class="token operator">=</span> <span class="token string">&quot;WebApplication1&quot;</span><span class="token punctuation">,</span> Version <span class="token operator">=</span> <span class="token string">&quot;v2&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IApplicationBuilder</span> app<span class="token punctuation">,</span> <span class="token class-name">IWebHostEnvironment</span> env<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    app<span class="token punctuation">.</span><span class="token function">UseSwaggerUI</span><span class="token punctuation">(</span>c <span class="token operator">=&gt;</span>
    <span class="token punctuation">{</span>
        c<span class="token punctuation">.</span><span class="token function">SwaggerEndpoint</span><span class="token punctuation">(</span><span class="token string">&quot;/swagger/v1/swagger.json&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;WebApplication1 v1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        c<span class="token punctuation">.</span><span class="token function">SwaggerEndpoint</span><span class="token punctuation">(</span><span class="token string">&quot;/swagger/v2/swagger.json&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;WebApplication1 v2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>第二步，去控制器的方法中添加如下内容：</p> <div class="language-csharp line-numbers-mode"><div class="highlight-lines"><br><div class="highlighted"> </div><br><br><br><br><br></div><pre class="language-csharp"><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpPost</span></span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ApiExplorerSettings</span><span class="token attribute-arguments"><span class="token punctuation">(</span>GroupName <span class="token operator">=</span> <span class="token string">&quot;v2&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">Post</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">FromBody</span></span><span class="token punctuation">]</span><span class="token class-name">Product</span> product<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>此时就已经配置好了多文档：</p> <img src="/docs/assets/roadmap/dotnet/swagger/v2_show.png" alt=""> <p>当然，多文档的名称是可以自定义的。所以，利用该方式可以将不同接口进行分类，形成分组式的多文档，这会带来更好的文档查阅体验。</p> <h2 id="配置文档内容"><a href="#配置文档内容" class="header-anchor">#</a> 配置文档内容</h2> <h3 id="文档全局信息"><a href="#文档全局信息" class="header-anchor">#</a> 文档全局信息</h3> <p>可以通过配置自定义很多文档信息，比如：</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token comment">// Startup.cs</span>
services<span class="token punctuation">.</span><span class="token function">AddSwaggerGen</span><span class="token punctuation">(</span>c <span class="token operator">=&gt;</span>
<span class="token punctuation">{</span>
    c<span class="token punctuation">.</span><span class="token function">SwaggerDoc</span><span class="token punctuation">(</span><span class="token string">&quot;v1&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">OpenApiInfo</span>
    <span class="token punctuation">{</span>
        Title <span class="token operator">=</span> <span class="token string">&quot;WebApplication1&quot;</span><span class="token punctuation">,</span>
        Version <span class="token operator">=</span> <span class="token string">&quot;v1&quot;</span><span class="token punctuation">,</span>
        Description <span class="token operator">=</span> <span class="token string">&quot;v1 document&quot;</span><span class="token punctuation">,</span>
        Contact <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">OpenApiContact</span>
        <span class="token punctuation">{</span>
            Name <span class="token operator">=</span> <span class="token string">&quot;Jeremy Jone&quot;</span><span class="token punctuation">,</span>
            Email <span class="token operator">=</span> <span class="token string">&quot;jeremyjone@qq.com&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        License <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">OpenApiLicense</span>
        <span class="token punctuation">{</span>
            Name <span class="token operator">=</span> <span class="token string">&quot;Apache 2.0&quot;</span><span class="token punctuation">,</span>
            Url <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Uri</span><span class="token punctuation">(</span><span class="token string">&quot;http://www.apache.org/licenses/LICENSE-2.0.html&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id="接口内容"><a href="#接口内容" class="header-anchor">#</a> 接口内容</h3> <p>对于接口，还可以通过属性的方式配置详细信息，比如响应类型：</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpGet</span></span><span class="token punctuation">]</span>
<span class="token comment">//[ProducesResponseType(typeof(IEnumerable&lt;WeatherForecast&gt;), 201)]</span>
<span class="token punctuation">[</span><span class="token function">ProducesResponseType</span><span class="token punctuation">(</span><span class="token number">201</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ProducesResponseType</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">IDictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ProducesResponseType</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name">IEnumerable<span class="token punctuation">&lt;</span>WeatherForecast<span class="token punctuation">&gt;</span></span> <span class="token function">MyFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>如果返回类型只写了 IActionResult，则可以通过添加 <code>typeof</code> 为成功响应添加类型。（如上例行2）</p> <h3 id="使用-xml-文档"><a href="#使用-xml-文档" class="header-anchor">#</a> 使用 xml 文档</h3> <p>还可以通过 <code>xml</code> 给文档添加详细信息。具体方法是在每个控制器、方法、类和属性添加 <code>xml</code> 注释：</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token comment">/// &lt;summary&gt;</span>
<span class="token comment">/// 返回天气列表</span>
<span class="token comment">/// &lt;/summary&gt;</span>
<span class="token comment">/// &lt;remarks&gt;Remarks!&lt;/remarks&gt;</span>
<span class="token comment">/// &lt;response code=&quot;201&quot;&gt;成功啦&lt;/response&gt;</span>
<span class="token comment">/// &lt;response code=&quot;400&quot;&gt;好像缺点什么&lt;/response&gt;</span>
<span class="token comment">/// &lt;response code=&quot;500&quot;&gt;服务器崩啦&lt;/response&gt;</span>
<span class="token punctuation">[</span>HttpGet<span class="token punctuation">]</span>
<span class="token comment">//[ProducesResponseType(typeof(IEnumerable&lt;WeatherForecast&gt;), 201)]</span>
<span class="token punctuation">[</span><span class="token function">ProducesResponseType</span><span class="token punctuation">(</span><span class="token number">201</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ProducesResponseType</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">IDictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ProducesResponseType</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name">IEnumerable<span class="token punctuation">&lt;</span>WeatherForecast<span class="token punctuation">&gt;</span></span> <span class="token function">MyFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>然后在项目属性中配置生成 <code>xml</code> 文档，</p> <img src="/docs/assets/roadmap/dotnet/swagger/generate_xml1.png" alt=""> <p>添加之后在配置中包含生成的 <code>xml</code> 文档，即可使用：</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>services<span class="token punctuation">.</span><span class="token function">AddSwaggerGen</span><span class="token punctuation">(</span>c <span class="token operator">=&gt;</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> filePath <span class="token operator">=</span> Path<span class="token punctuation">.</span><span class="token function">Combine</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span>AppContext<span class="token punctuation">.</span>BaseDirectory<span class="token punctuation">,</span> <span class="token string">&quot;WebApplication1.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    c<span class="token punctuation">.</span><span class="token function">IncludeXmlComments</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>如果包含多个 <code>xml</code> 文档，可以多次调用 <code>IncludeXmlComments</code> 方法添加，最终生成完整的文档。</p></div> <img src="/docs/assets/roadmap/dotnet/swagger/xml_desc_show.png" alt=""> <p>但是这样会有一个问题，就是需要在每个类和方法前面都要添加注释，否则会有警告：</p> <img src="/docs/assets/roadmap/dotnet/swagger/xml_desc_err.png" alt=""> <p>这样会很不爽，简单的配置一下，还是打开刚才配置生成 <code>xml</code> 文档的属性界面，添加 <code>1591</code> 到 <code>取消显示警告</code> 栏中即可：</p> <img src="/docs/assets/roadmap/dotnet/swagger/xml_desc_err_sln.png" alt=""> <h2 id="配置认证"><a href="#配置认证" class="header-anchor">#</a> 配置认证</h2> <p>通常我们的接口都是需要认证和授权的，如果没有认证，是无法使用文档中的 <code>Try it out</code> 功能的。</p> <p>最简单的就是写一个获取 token 接口，然后手动填写到认证对话框中，就可以开始使用了。</p> <p>但是这种方式并不好，我们可以利用认证服务器进行稍微复杂一点的认证。好在 <code>Swagger</code> 为我们提供了便利的认证功能，通过简单设置即可进行认证：</p> <p>官方文档给的 implicit 示例：</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token comment">// Startup.cs</span>
services<span class="token punctuation">.</span><span class="token function">AddSwaggerGen</span><span class="token punctuation">(</span>c <span class="token operator">=&gt;</span>
<span class="token punctuation">{</span>
    <span class="token comment">// Define the OAuth2.0 scheme that's in use (i.e. Implicit Flow)</span>
    c<span class="token punctuation">.</span><span class="token function">AddSecurityDefinition</span><span class="token punctuation">(</span><span class="token string">&quot;oauth2&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">OpenApiSecurityScheme</span>
    <span class="token punctuation">{</span>
        Type <span class="token operator">=</span> SecuritySchemeType<span class="token punctuation">.</span>OAuth2<span class="token punctuation">,</span>
        Flows <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">OpenApiOAuthFlows</span>
        <span class="token punctuation">{</span>
            Implicit <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">OpenApiOAuthFlow</span>
            <span class="token punctuation">{</span>
                AuthorizationUrl <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Uri</span><span class="token punctuation">(</span><span class="token string">&quot;/auth-server/connect/authorize&quot;</span><span class="token punctuation">,</span> UriKind<span class="token punctuation">.</span>Relative<span class="token punctuation">)</span><span class="token punctuation">,</span>
                Scopes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span></span>
                <span class="token punctuation">{</span>
                    <span class="token punctuation">{</span> <span class="token string">&quot;readAccess&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Access read operations&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span> <span class="token string">&quot;writeAccess&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Access write operations&quot;</span> <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>自己写的 code 示例：</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>services<span class="token punctuation">.</span><span class="token function">AddSwaggerGen</span><span class="token punctuation">(</span>c <span class="token operator">=&gt;</span>
<span class="token punctuation">{</span>
    c<span class="token punctuation">.</span><span class="token function">AddSecurityDefinition</span><span class="token punctuation">(</span><span class="token string">&quot;oauth2&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">OpenApiSecurityScheme</span>
    <span class="token punctuation">{</span>
        Type <span class="token operator">=</span> SecuritySchemeType<span class="token punctuation">.</span>OAuth2<span class="token punctuation">,</span>
        Flows <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">OpenApiOAuthFlows</span>
        <span class="token punctuation">{</span>
            AuthorizationCode <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">OpenApiOAuthFlow</span>
            <span class="token punctuation">{</span>
                AuthorizationUrl <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Uri</span><span class="token punctuation">(</span><span class="token string">&quot;auth-server/connect/authorize&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                TokenUrl <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Uri</span><span class="token punctuation">(</span><span class="token string">&quot;auth-server/connect/token&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                Scopes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
                    <span class="token punctuation">{</span> <span class="token string">&quot;OidcApiName&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ApiName&quot;</span> <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">UseSwaggerUI</span><span class="token punctuation">(</span>c <span class="token operator">=&gt;</span>
<span class="token punctuation">{</span>
    c<span class="token punctuation">.</span><span class="token function">SwaggerEndpoint</span><span class="token punctuation">(</span><span class="token string">&quot;/swagger/v1/swagger.json&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ApiName&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    c<span class="token punctuation">.</span><span class="token function">OAuthClientId</span><span class="token punctuation">(</span><span class="token string">&quot;OidcSwaggerUIClientId&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    c<span class="token punctuation">.</span><span class="token function">OAuthAppName</span><span class="token punctuation">(</span><span class="token string">&quot;ApiName&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    c<span class="token punctuation">.</span><span class="token function">OAuthUsePkce</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><div class="custom-block warning"><p class="custom-block-title">请注意</p> <p>所有配置需要配合认证服务器的客户端配置项。</p></div> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>不了解认证的客户端，请参考 <a href="/docs/document/roadmap/dotnetcore/auth/is4/intro-config.html#client">认证与授权</a> 。</p></div> <p>然后我们就可以进行简单的认证并开始使用了。</p> <h2 id="更多"><a href="#更多" class="header-anchor">#</a> 更多</h2> <p>Swagger 还有更多的内容，平时基本用不到或者很少用到，比如高级过滤器、重定义 css 样式等。如果以上内容不能满足你的需求或者你想了解更多，可以参考 <a href="https://github.com/domaindrivendev/Swashbuckle.AspNetCore" target="_blank" rel="noopener noreferrer">官方文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 进一步学习。</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/jeremyjone/docs/edit/master/docs/roadmap/dotnetcore/swagger/README.md" target="_blank" rel="noopener noreferrer">修改此页面</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">最后更新时间:</span> <span class="time">11/10/2021, 8:39:22 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docs/roadmap/dotnetcore/log/APM.html" class="prev">
        应用性能监控系统
      </a></span> <span class="next"><a href="/docs/roadmap/dotnetcore/microservice/mq/RabbitMQ.html">
        RabbitMQ 的使用
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/docs/assets/js/app.d103760d.js" defer></script><script src="/docs/assets/js/2.525f04cb.js" defer></script><script src="/docs/assets/js/63.3324d7d2.js" defer></script>
  </body>
</html>
